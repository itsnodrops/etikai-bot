const _0x21aa5e=_0x5429;(function(_0xb6723,_0x4fd093){const _0x434af5=_0x5429,_0x53a42e=_0xb6723();while(!![]){try{const _0x32c689=-parseInt(_0x434af5(0x12a))/0x1+-parseInt(_0x434af5(0x129))/0x2*(-parseInt(_0x434af5(0xf6))/0x3)+-parseInt(_0x434af5(0x101))/0x4+parseInt(_0x434af5(0x13a))/0x5+parseInt(_0x434af5(0x11e))/0x6+-parseInt(_0x434af5(0x124))/0x7*(parseInt(_0x434af5(0x145))/0x8)+-parseInt(_0x434af5(0xea))/0x9*(-parseInt(_0x434af5(0xf5))/0xa);if(_0x32c689===_0x4fd093)break;else _0x53a42e['push'](_0x53a42e['shift']());}catch(_0x25c396){_0x53a42e['push'](_0x53a42e['shift']());}}}(_0x6894,0x2f8a1));import _0x2d0435 from'dotenv';import _0x367250 from'path';import{fileURLToPath}from'url';import{ethers}from'ethers';function _0x5429(_0x21deda,_0x56bfe4){const _0x6894fd=_0x6894();return _0x5429=function(_0x5429f4,_0x4cb183){_0x5429f4=_0x5429f4-0xe3;let _0x451268=_0x6894fd[_0x5429f4];return _0x451268;},_0x5429(_0x21deda,_0x56bfe4);}import{Config}from'./config.js';function _0x6894(){const _0x5cc8ee=['SA\x20Balance\x20Updated','Connecting...','setCycleState','updateUserInfo','config','.\x20Skipping.','13448WZvmHm','Cycle\x20Failed:\x20','performMultipleChatInteractions','DELAY_BETWEEN_ACCOUNTS_SEC','\x20(EOA:\x20','push','userAgent','manager','autoStakeWithRetries','username','[INFO]\x20---\x20Starting/Resuming\x20full\x20cycle\x20for\x20all\x20accounts\x20(Target\x20Daily\x20Reset:\x20','[ERROR]\x20','.env','getUserStakedAmount','dashboard','dirname','18oUyfMd','floor','addDebugMessage','setCurrentlyProcessing','eoaAddress','updateAccount','split','totalStaked','formatEther','getBalance','s\x20before\x20next\x20account...','178540bUwVIZ','1100823lhilji','provider','RESET_TIME','wallet','exit','getSmartAccountBalance','toFixed','join','eoaBalance','doQuiz','total_xp_points','1006536tmtaPG','):\x20Wallet\x20connected.\x20Bal:\x20','s...','updateStatus','refreshSmartAccountBalance','\x20(approx\x20','[INFO]\x20Found\x20','substring','stringify','updateSmartAccountBalance','warn','Account\x20','user','initializeUserAgent','[SUCCESS]\x20','round','min','message','updateStakedAmount',':\x20Operations\x20cycle\x20finished.','updateFullAccountDetails','[INFO]\x20Delaying\x20','Wallet','KITE_TESTNET','getUserInfo','address','getAvailableAgents','accessToken','renderDashboard','476046rRJoVZ','entries','[INFO]\x20BOT\x20SERVICE\x20INITIALIZING...','PRIVATE_KEY_','length','startsWith','1344PSpykA','Cycle\x20Complete,\x20awaiting\x20next\x20daily\x20reset','fetchAvailableMarketSubnets','[FATAL]\x20BOT\x20EXITED:\x20','env','2jxVoih','40988JIIYpr','updateNextCycleCountdown','error','[WARN]\x20Invalid\x20format\x20for\x20','initializeGlobalQuestions','profile','saBalance','No\x20private\x20keys.','getTime','privateKey','Initializing','[ERROR]\x20No\x20private\x20keys\x20found.\x20Set\x20PRIVATE_KEY_...\x20in\x20.env','getDate','setDate','Staked\x20Amount\x20Updated','.\x20===','1640525MLgTgY','index','N/A','[INFO]\x20===\x20Full\x20cycle\x20for\x20all\x20accounts\x20complete.\x20Waiting\x20until\x20next\x20','User\x20'];_0x6894=function(){return _0x5cc8ee;};return _0x6894();}import{API,RPC_URLS,KITE_CHAIN_ID}from'./src/api/api.js';import _0x410409 from'./src/services/groq.js';import{SignInService,isPrivateKey}from'./src/services/signin.js';import{StakingService}from'./src/services/staking.js';import{QuizService}from'./src/services/quiz.js';import{ChatService}from'./src/services/chat.js';import{AccountManager,Dashboard}from'./src/utils/dashboard.js';import{getUserAgentForAccount}from'./src/utils/user-agent.js';const __filename=fileURLToPath(import.meta['url']),__dirname=_0x367250[_0x21aa5e(0xe9)](__filename);_0x2d0435[_0x21aa5e(0x143)]({'path':_0x367250[_0x21aa5e(0xfd)](__dirname,_0x21aa5e(0xe6))});async function pureDelay(_0x11ebf5){return new Promise(_0x13be45=>setTimeout(_0x13be45,_0x11ebf5));}function msToTime(_0x3dd8be){const _0x3069b0=_0x21aa5e,_0x49ccaf=Math[_0x3069b0(0xeb)](_0x3dd8be/0x36ee80),_0x32a332=Math[_0x3069b0(0xeb)](_0x3dd8be%0x36ee80/0xea60),_0x4dd292=Math[_0x3069b0(0x110)](_0x3dd8be%0xea60/0x3e8);return _0x49ccaf+'h\x20'+_0x32a332+'m\x20'+_0x4dd292+'s';}function calculateDelayUntilNextTargetTime(_0x56b074,_0x275982){const _0x54c421=_0x21aa5e,_0x31d06c=new Date();let _0xe95c5f=new Date();return _0xe95c5f['setHours'](_0x56b074,_0x275982,0x0,0x0),_0x31d06c>=_0xe95c5f&&_0xe95c5f[_0x54c421(0x137)](_0xe95c5f[_0x54c421(0x136)]()+0x1),_0xe95c5f['getTime']()-_0x31d06c[_0x54c421(0x132)]();}const privateKeys=[];for(const key in process['env']){key[_0x21aa5e(0x123)](_0x21aa5e(0x121))&&process['env'][key]&&(isPrivateKey(process[_0x21aa5e(0x128)][key])?privateKeys[_0x21aa5e(0x14a)](process['env'][key]):console[_0x21aa5e(0x10b)](_0x21aa5e(0x12d)+key+_0x21aa5e(0x144)));}const accountManager=new AccountManager(),dashboard=new Dashboard(accountManager,privateKeys[_0x21aa5e(0x122)]),api=new API(dashboard),groqService=new _0x410409(dashboard),signInService=new SignInService(api,dashboard),stakingService=new StakingService(api,dashboard),quizService=new QuizService(api,dashboard),chatService=new ChatService(api,dashboard,groqService);class AccountOperationContext{constructor(_0x1b5f43,_0x52cfd6,_0x5af18a,_0x19840e){const _0x5649e7=_0x21aa5e;this[_0x5649e7(0x133)]=_0x1b5f43,this[_0x5649e7(0x13b)]=_0x52cfd6,this['id']=_0x5649e7(0x13e)+(_0x52cfd6+0x1),this[_0x5649e7(0x14c)]=_0x5af18a,this[_0x5649e7(0xe8)]=_0x19840e,this[_0x5649e7(0xee)]=null,this[_0x5649e7(0xf9)]=null,this[_0x5649e7(0xf7)]=null,this[_0x5649e7(0x11c)]=null,this[_0x5649e7(0x10d)]=null,this[_0x5649e7(0xfe)]=_0x5649e7(0x13c),this[_0x5649e7(0x130)]=_0x5649e7(0x13c),this['totalStaked']=_0x5649e7(0x13c),this[_0x5649e7(0x14b)]=null,this[_0x5649e7(0x14c)][_0x5649e7(0xef)](this[_0x5649e7(0x133)],{'id':this[_0x5649e7(0x133)],'originalIndex':this[_0x5649e7(0x13b)],'eoa_address':_0x5649e7(0x140),'status':_0x5649e7(0x134),'balances':{'eoa_native':'N/A','sa_kite':'N/A'},'xp':_0x5649e7(0x13c),'staked':'N/A','displayed_name':_0x5649e7(0x10c)+(this[_0x5649e7(0x13b)]+0x1)});}async[_0x21aa5e(0x10e)](){const _0x18e8cc=_0x21aa5e;if(!this[_0x18e8cc(0xee)]){this['dashboard'][_0x18e8cc(0xec)](_0x18e8cc(0xe5)+this['id']+':\x20EOA\x20address\x20not\x20available\x20when\x20initializing\x20User\x20Agent.\x20Critical\x20error.');throw new Error('EOA\x20address\x20is\x20required\x20to\x20initialize\x20user\x20agent\x20for\x20account\x20'+this['id']);}this['userAgent']=await getUserAgentForAccount(this[_0x18e8cc(0xee)]);}[_0x21aa5e(0x104)](_0x4da16a){const _0x110d3a=_0x21aa5e,_0x505380=this[_0x110d3a(0xee)]||this[_0x110d3a(0x133)];this[_0x110d3a(0x14c)][_0x110d3a(0xef)](_0x505380,{'status':_0x4da16a,'originalIndex':this[_0x110d3a(0x13b)]}),this[_0x110d3a(0xe8)]['renderDashboard']();}[_0x21aa5e(0x115)](_0x35ffc2){const _0x57b5cd=_0x21aa5e,_0x80f89a=this[_0x57b5cd(0xee)]||this['privateKey'],_0x1a9d2c={'eoa_address':this[_0x57b5cd(0xee)],'smart_account_address':this['user']?.[_0x57b5cd(0x12f)]?.['smart_account_address'],'displayed_name':this[_0x57b5cd(0x10d)]?.[_0x57b5cd(0x12f)]?.['displayed_name']||this[_0x57b5cd(0x10d)]?.['profile']?.[_0x57b5cd(0xe3)]||'Account\x20'+(this[_0x57b5cd(0x13b)]+0x1),'balances':{'eoa_native':this[_0x57b5cd(0xfe)],'sa_kite':this['saBalance']},'xp':this['user']?.['profile']?.['total_xp_points'],'staked':this['totalStaked'],'originalIndex':this[_0x57b5cd(0x13b)],..._0x35ffc2};this[_0x57b5cd(0x14c)][_0x57b5cd(0xef)](_0x80f89a,_0x1a9d2c),this[_0x57b5cd(0xe8)]['renderDashboard']();}[_0x21aa5e(0x142)](_0x548385){const _0x5c615e=_0x21aa5e;this[_0x5c615e(0x10d)]=_0x548385,this['updateFullAccountDetails']({'xp':_0x548385?.[_0x5c615e(0x12f)]?.[_0x5c615e(0x100)]});}[_0x21aa5e(0x10a)](_0x3e2960,_0x10928c=!![]){const _0x1acf4a=_0x21aa5e;this[_0x1acf4a(0x130)]=_0x3e2960,this[_0x1acf4a(0x115)]({'balances':{'eoa_native':this[_0x1acf4a(0xfe)],'sa_kite':_0x3e2960}});if(_0x10928c)this[_0x1acf4a(0x104)](_0x1acf4a(0x13f));}async[_0x21aa5e(0x105)](_0x56a46f,_0x379da8=!![]){const _0x1198b2=_0x21aa5e;return this[_0x1198b2(0x130)]=await signInService[_0x1198b2(0xfb)](_0x56a46f,this[_0x1198b2(0x10d)],this,_0x379da8),{'sa_kite':this[_0x1198b2(0x130)]};}[_0x21aa5e(0x113)](_0x4f5cbf,_0x2dc4c1=!![]){const _0x4b8324=_0x21aa5e;this[_0x4b8324(0xf1)]=_0x4f5cbf,this[_0x4b8324(0x115)]({'staked':_0x4f5cbf});if(_0x2dc4c1)this[_0x4b8324(0x104)](_0x4b8324(0x138));}}async function operation(_0x532973,_0x2b18d5){const _0x25db80=_0x21aa5e,_0x197eb7=new AccountOperationContext(_0x532973,_0x2b18d5,accountManager,dashboard);dashboard[_0x25db80(0xed)](_0x532973);try{_0x197eb7[_0x25db80(0x104)]('Connecting\x20Wallet'),_0x197eb7[_0x25db80(0xf7)]=new ethers['JsonRpcProvider'](RPC_URLS[_0x25db80(0x118)],KITE_CHAIN_ID),_0x197eb7[_0x25db80(0xf9)]=new ethers[(_0x25db80(0x117))](_0x532973,_0x197eb7[_0x25db80(0xf7)]),_0x197eb7[_0x25db80(0xee)]=_0x197eb7[_0x25db80(0xf9)][_0x25db80(0x11a)],dashboard[_0x25db80(0xed)](_0x197eb7[_0x25db80(0xee)]),await _0x197eb7[_0x25db80(0x10e)]();const _0x43ddfa=await _0x197eb7[_0x25db80(0xf7)][_0x25db80(0xf3)](_0x197eb7[_0x25db80(0xee)]);_0x197eb7['eoaBalance']=parseFloat(ethers[_0x25db80(0xf2)](_0x43ddfa))[_0x25db80(0xfc)](0x4),_0x197eb7['updateFullAccountDetails']({'status':'Wallet\x20Connected'}),dashboard[_0x25db80(0xec)](_0x25db80(0x10f)+_0x197eb7['id']+'\x20('+_0x197eb7[_0x25db80(0xee)]+_0x25db80(0x102)+_0x197eb7[_0x25db80(0xfe)]+'\x20KITE'),_0x197eb7['accessToken']=await signInService['signIn'](_0x197eb7[_0x25db80(0xee)],_0x197eb7),_0x197eb7[_0x25db80(0x10d)]=await signInService[_0x25db80(0x119)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7),_0x197eb7['saBalance']=await signInService[_0x25db80(0xfb)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7[_0x25db80(0x10d)],_0x197eb7),await stakingService[_0x25db80(0xe7)](_0x197eb7['accessToken'],_0x197eb7),await stakingService[_0x25db80(0x126)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7),await stakingService[_0x25db80(0x14d)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7['saBalance'],_0x197eb7),await _0x197eb7[_0x25db80(0x105)](_0x197eb7[_0x25db80(0x11c)],![]),await stakingService[_0x25db80(0xe7)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7,![]),await stakingService['claimRewardsWithRetries'](_0x197eb7[_0x25db80(0x11c)],_0x197eb7),await _0x197eb7[_0x25db80(0x105)](_0x197eb7[_0x25db80(0x11c)],![]),await stakingService[_0x25db80(0xe7)](_0x197eb7['accessToken'],_0x197eb7,![]);const _0x558a67=await quizService[_0x25db80(0xff)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7[_0x25db80(0x10d)],_0x197eb7['eoaAddress'],_0x197eb7);_0x558a67&&(_0x197eb7['user']=await signInService['getUserInfo'](_0x197eb7['accessToken'],_0x197eb7,![])),await chatService[_0x25db80(0x11b)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7),await chatService[_0x25db80(0x147)](_0x197eb7[_0x25db80(0x11c)],_0x197eb7[_0x25db80(0x10d)],_0x197eb7),_0x197eb7[_0x25db80(0x104)](_0x25db80(0x125)),dashboard['addDebugMessage'](_0x25db80(0x10f)+_0x197eb7['id']+_0x25db80(0x114));}catch(_0x318aec){const _0x4d67d1=_0x318aec[_0x25db80(0x112)]||JSON['stringify'](_0x318aec);dashboard[_0x25db80(0xec)](_0x25db80(0xe5)+_0x197eb7['id']+_0x25db80(0x149)+(_0x197eb7[_0x25db80(0xee)]||_0x25db80(0x13c))+'):\x20Operation\x20Cycle\x20Failed:\x20'+_0x4d67d1),_0x197eb7[_0x25db80(0x104)](_0x25db80(0x146)+_0x4d67d1[_0x25db80(0x108)](0x0,0x1e)+'...');}}async function startBot(){const _0x27f7b6=_0x21aa5e;dashboard['addDebugMessage'](_0x27f7b6(0x120)),await groqService[_0x27f7b6(0x12e)]();if(privateKeys[_0x27f7b6(0x122)]===0x0){dashboard[_0x27f7b6(0xec)](_0x27f7b6(0x135));throw new Error(_0x27f7b6(0x131));}dashboard[_0x27f7b6(0xec)](_0x27f7b6(0x107)+privateKeys[_0x27f7b6(0x122)]+'\x20keys.\x20Starting\x20initial\x20processing\x20cycle.');while(!![]){dashboard[_0x27f7b6(0x141)](![]),dashboard[_0x27f7b6(0xec)](_0x27f7b6(0xe4)+Config[_0x27f7b6(0xf8)]+')\x20---');for(const [_0x3834c0,_0x1ea76c]of privateKeys[_0x27f7b6(0x11f)]()){dashboard['addDebugMessage']('[INFO]\x20===\x20Processing\x20Account\x20'+(_0x3834c0+0x1)+'/'+privateKeys[_0x27f7b6(0x122)]+'\x20==='),await operation(_0x1ea76c,_0x3834c0);if(_0x3834c0<privateKeys[_0x27f7b6(0x122)]-0x1){dashboard[_0x27f7b6(0xec)](_0x27f7b6(0x116)+Config[_0x27f7b6(0x148)]+_0x27f7b6(0xf4));for(let _0x593a29=Config[_0x27f7b6(0x148)];_0x593a29>0x0;_0x593a29--){dashboard['updateNextCycleCountdown']('Next\x20account\x20in\x20'+_0x593a29+_0x27f7b6(0x103)),await pureDelay(0x3e8);}}}dashboard['setCycleState'](!![]),dashboard['setCurrentlyProcessing'](null),dashboard['addDebugMessage'](_0x27f7b6(0x13d)+Config[_0x27f7b6(0xf8)]+_0x27f7b6(0x139));const [_0x2c1810,_0x852939]=Config['RESET_TIME'][_0x27f7b6(0xf0)](':'),_0x5e5d2a=parseInt(_0x2c1810,0xa),_0x201f3=parseInt(_0x852939,0xa);let _0x1dbfd6=calculateDelayUntilNextTargetTime(_0x5e5d2a,_0x201f3);dashboard['addDebugMessage']('[INFO]\x20Next\x20full\x20cycle\x20scheduled\x20for\x20'+Config[_0x27f7b6(0xf8)]+_0x27f7b6(0x106)+msToTime(_0x1dbfd6)+').');while(_0x1dbfd6>0x0){dashboard[_0x27f7b6(0x12b)](msToTime(_0x1dbfd6)),await pureDelay(Math[_0x27f7b6(0x111)](_0x1dbfd6,0x3e8)),_0x1dbfd6=calculateDelayUntilNextTargetTime(_0x5e5d2a,_0x201f3);}}}((async()=>{const _0x1bde65=_0x21aa5e;try{dashboard[_0x1bde65(0x11d)](),await startBot();}catch(_0x195a0b){const _0x36d0fb=_0x195a0b[_0x1bde65(0x112)]||JSON[_0x1bde65(0x109)](_0x195a0b);console[_0x1bde65(0x12c)]('CRITICAL\x20BOT\x20FAILURE:\x20',_0x36d0fb);if(dashboard)dashboard[_0x1bde65(0xec)](_0x1bde65(0x127)+_0x36d0fb);process[_0x1bde65(0xfa)](0x1);}})());