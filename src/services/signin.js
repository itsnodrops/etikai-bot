const _0x44b1ec=_0x1854;(function(_0x31d383,_0x4b23f5){const _0x27d355=_0x1854,_0x133894=_0x31d383();while(!![]){try{const _0x3690f8=-parseInt(_0x27d355(0x1d3))/0x1*(parseInt(_0x27d355(0x1da))/0x2)+-parseInt(_0x27d355(0x1ec))/0x3*(parseInt(_0x27d355(0x1e4))/0x4)+parseInt(_0x27d355(0x1bf))/0x5*(parseInt(_0x27d355(0x1d2))/0x6)+-parseInt(_0x27d355(0x214))/0x7*(parseInt(_0x27d355(0x1bd))/0x8)+-parseInt(_0x27d355(0x1cf))/0x9*(-parseInt(_0x27d355(0x207))/0xa)+-parseInt(_0x27d355(0x1f0))/0xb*(-parseInt(_0x27d355(0x1c5))/0xc)+parseInt(_0x27d355(0x1d0))/0xd;if(_0x3690f8===_0x4b23f5)break;else _0x133894['push'](_0x133894['shift']());}catch(_0x518a36){_0x133894['push'](_0x133894['shift']());}}}(_0x321a,0xb5be4));function _0x321a(){const _0x591446=['4621837gFjMdV','\x20failed.\x20Waiting\x20','test','updateStatus','N/A','Bearer\x20','SA\x20Address\x20Missing','Sign-in\x20response\x20invalid:\x20',':\x20SA\x20KITE\x20Balance:\x20','POST','Getting\x20SA\x20KITE\x20Balance','[WARN]\x20','Failed\x20to\x20generate\x20AES\x20key\x20for\x20sign-in.','kite','Failed\x20to\x20get\x20user\x20info:\x20','USER_INFO','GET','message',':\x20Could\x20not\x20get\x20SA\x20balances.\x20Msg:\x20','Invalid\x20AES\x20key\x20length.','signIn','SignIn\x20Cooldown:\x20','from','430TuKCst','randomBytes','createCipheriv','\x20GetUserInfo:\x20','[ERROR]\x20','toFixed','balances','dashboard','hex','concat',':\x20User\x20Info\x20(XP:\x20','updateSmartAccountBalance','error','7YdobjI','[INFO]\x20','status','1805720dMMNAZ','...','215XlecpZ','access_token','number','update','aes-256-gcm',':\x20SignIn\x20successful\x20(Attempt\x20','12HLxGBV','round',':\x20SignIn\x20cycle\x20','SIGN_IN','smart_account_address','6a1c35292b7c5b769ff47d89a17e7bc4f0adfe1b462981d28e0e9f7ff20b8f8a','stringify','SignIn\x20Fail\x20',':\x20SignIn\x20FAILED\x20definitively.','Error\x20SA\x20Balance','235377WENsNd','8824881gTiagI','userAgent','22818jhwzcS','1432jTOWHi','data','\x20GetSmartAccountBalance:\x20','Error\x20User\x20Info','substring','string','SignIn\x20Att\x20','1220ImGwMy','replace','toString','api','Error\x20generating\x20AES\x20Key\x20for\x20SignIn:',':\x20Starting\x20SignIn\x20process...','addDebugMessage',')\x20fetched.','fetch','Getting\x20User\x20Info','2173828xIpFgp','getAuthTag','SA\x20Balance\x20Fetched','https://testnet.gokite.ai/','floor','getSmartAccountBalance','SMART_ACCOUNT_BALANCE',':\x20SignIn\x20attempt\x20','3JgPsbl','length','getUserInfo','profile'];_0x321a=function(){return _0x591446;};return _0x321a();}import _0x24c48b from'crypto';import{API_ENDPOINTS}from'../api/api.js';const SIGNIN_MAX_MAJOR_ATTEMPTS=0x5,SIGNIN_MAX_MINOR_ATTEMPTS=0x5,SIGNIN_MINOR_RETRY_DELAY_MS=0x1e*0x3e8,SIGNIN_MAJOR_RETRY_DELAY_MS=0x1e*0x3c*0x3e8,SIGNIN_AES_HEX_KEY=_0x44b1ec(0x1ca);function _0x1854(_0x400061,_0x3658fa){const _0x321a5d=_0x321a();return _0x1854=function(_0x18540a,_0x46c732){_0x18540a=_0x18540a-0x1bc;let _0x1722a5=_0x321a5d[_0x18540a];return _0x1722a5;},_0x1854(_0x400061,_0x3658fa);}async function pureDelay(_0x5fdbc4){return new Promise(_0x35435a=>setTimeout(_0x35435a,_0x5fdbc4));}function msToTime(_0x12a338){const _0x59bad3=_0x44b1ec,_0x170c70=Math['floor'](_0x12a338/0x36ee80),_0x2afbc0=Math[_0x59bad3(0x1e8)](_0x12a338%0x36ee80/0xea60),_0x1effb2=Math[_0x59bad3(0x1c6)](_0x12a338%0xea60/0x3e8);return _0x170c70+'h\x20'+_0x2afbc0+'m\x20'+_0x1effb2+'s';}async function generateAES256GCMKey(_0x201802,_0x5b2010){const _0x1537f2=_0x44b1ec;try{const _0x130d52=Buffer[_0x1537f2(0x206)](_0x5b2010,_0x1537f2(0x20f));if(_0x130d52[_0x1537f2(0x1ed)]!==0x20)throw new Error(_0x1537f2(0x203));const _0x9e395a=_0x24c48b[_0x1537f2(0x208)](0xc),_0x312985=_0x24c48b[_0x1537f2(0x209)](_0x1537f2(0x1c3),_0x130d52,_0x9e395a,{'authTagLength':0x10}),_0x33adef=Buffer[_0x1537f2(0x210)]([_0x312985[_0x1537f2(0x1c2)](Buffer['from'](_0x201802)),_0x312985['final']()]),_0x1b5917=_0x312985[_0x1537f2(0x1e5)]();return Buffer['concat']([_0x9e395a,_0x33adef,_0x1b5917])[_0x1537f2(0x1dc)](_0x1537f2(0x20f));}catch(_0x17a109){return console['error'](_0x1537f2(0x1de),_0x17a109[_0x1537f2(0x201)]),null;}}export function isPrivateKey(_0x161b5e){const _0x2cfb81=_0x44b1ec;if(typeof _0x161b5e!==_0x2cfb81(0x1d8))return![];const _0x5f0566=_0x161b5e[_0x2cfb81(0x1db)](/^0x/,'');return/^[a-fA-F0-9]{64}$/[_0x2cfb81(0x1f2)](_0x5f0566);}export class SignInService{constructor(_0x540b95,_0x3ca137){const _0x22908f=_0x44b1ec;this[_0x22908f(0x1dd)]=_0x540b95,this['dashboard']=_0x3ca137;}async[_0x44b1ec(0x204)](_0x4b28b2,_0x2d276a){const _0xcafcc3=_0x44b1ec;let _0x34f6fb=null;this[_0xcafcc3(0x20e)][_0xcafcc3(0x1e0)](_0xcafcc3(0x215)+_0x2d276a['id']+_0xcafcc3(0x1df));for(let _0x40fc03=0x1;_0x40fc03<=SIGNIN_MAX_MAJOR_ATTEMPTS;_0x40fc03++){for(let _0x1c6bf4=0x1;_0x1c6bf4<=SIGNIN_MAX_MINOR_ATTEMPTS;_0x1c6bf4++){const _0x8ecce2=_0x40fc03+'.'+_0x1c6bf4;_0x2d276a[_0xcafcc3(0x1f3)](_0xcafcc3(0x1d9)+_0x8ecce2);try{const _0x5631d9=await generateAES256GCMKey(_0x4b28b2,SIGNIN_AES_HEX_KEY);if(!_0x5631d9)throw new Error(_0xcafcc3(0x1fc));const _0x442452=await this['api'][_0xcafcc3(0x1e2)](API_ENDPOINTS[_0xcafcc3(0x1c8)],_0xcafcc3(0x1f9),_0x5631d9,{'eoa':_0x4b28b2},{},undefined,_0x2d276a[_0xcafcc3(0x1d1)]);if(_0x442452[_0xcafcc3(0x213)])throw new Error('API\x20Error\x20'+_0x442452[_0xcafcc3(0x1bc)]+':\x20'+(_0x442452[_0xcafcc3(0x201)]||JSON[_0xcafcc3(0x1cb)](_0x442452[_0xcafcc3(0x1d4)])));if(_0x442452['data']?.[_0xcafcc3(0x1d4)]?.[_0xcafcc3(0x1c0)])return _0x34f6fb=_0x442452['data'][_0xcafcc3(0x1d4)]['access_token'],this[_0xcafcc3(0x20e)][_0xcafcc3(0x1e0)]('[SUCCESS]\x20'+_0x2d276a['id']+_0xcafcc3(0x1c4)+_0x8ecce2+').'),_0x2d276a['updateStatus']('Signed\x20In\x20Successfully'),_0x34f6fb;else throw new Error(_0xcafcc3(0x1f7)+JSON[_0xcafcc3(0x1cb)](_0x442452['data'])[_0xcafcc3(0x1d7)](0x0,0x64));}catch(_0x58f411){this[_0xcafcc3(0x20e)][_0xcafcc3(0x1e0)]('[WARN]\x20'+_0x2d276a['id']+_0xcafcc3(0x1eb)+_0x8ecce2+'\x20failed:\x20'+_0x58f411['message'][_0xcafcc3(0x1d7)](0x0,0x64)+_0xcafcc3(0x1be)),_0x2d276a[_0xcafcc3(0x1f3)](_0xcafcc3(0x1cc)+_0x8ecce2),_0x1c6bf4<SIGNIN_MAX_MINOR_ATTEMPTS&&await pureDelay(SIGNIN_MINOR_RETRY_DELAY_MS);}}if(_0x34f6fb)return _0x34f6fb;if(_0x40fc03<SIGNIN_MAX_MAJOR_ATTEMPTS){this['dashboard'][_0xcafcc3(0x1e0)](_0xcafcc3(0x215)+_0x2d276a['id']+_0xcafcc3(0x1c7)+_0x40fc03+_0xcafcc3(0x1f1)+msToTime(SIGNIN_MAJOR_RETRY_DELAY_MS)+_0xcafcc3(0x1be));let _0x51adf4=SIGNIN_MAJOR_RETRY_DELAY_MS;while(_0x51adf4>0x0){_0x2d276a[_0xcafcc3(0x1f3)](_0xcafcc3(0x205)+msToTime(_0x51adf4)),await pureDelay(Math['min'](_0x51adf4,0x1388)),_0x51adf4-=0x1388;}}}if(!_0x34f6fb){const _0xf1aa92=_0x2d276a['id']+_0xcafcc3(0x1cd);this[_0xcafcc3(0x20e)][_0xcafcc3(0x1e0)](_0xcafcc3(0x20b)+_0xf1aa92),_0x2d276a[_0xcafcc3(0x1f3)]('SignIn\x20Failed\x20-\x20Max\x20Retries');throw new Error(_0xf1aa92);}return _0x34f6fb;}async[_0x44b1ec(0x1ee)](_0x1add4e,_0x2c3adf,_0xb8213f=!![]){const _0x2ceda4=_0x44b1ec;try{if(_0xb8213f)_0x2c3adf[_0x2ceda4(0x1f3)](_0x2ceda4(0x1e3));const _0x313033=await this[_0x2ceda4(0x1dd)][_0x2ceda4(0x1e2)](API_ENDPOINTS[_0x2ceda4(0x1ff)],_0x2ceda4(0x200),'Bearer\x20'+_0x1add4e,{},{},undefined,_0x2c3adf[_0x2ceda4(0x1d1)]);if(_0x313033[_0x2ceda4(0x213)]||!_0x313033[_0x2ceda4(0x1d4)]?.[_0x2ceda4(0x1d4)])throw new Error(_0x2ceda4(0x1fe)+(_0x313033['message']||JSON['stringify'](_0x313033['data'])));const _0x5daa6a=_0x313033[_0x2ceda4(0x1d4)][_0x2ceda4(0x1d4)];_0x2c3adf['updateUserInfo'](_0x5daa6a);if(_0xb8213f)this[_0x2ceda4(0x20e)][_0x2ceda4(0x1e0)](_0x2ceda4(0x215)+_0x2c3adf['id']+_0x2ceda4(0x211)+(_0x5daa6a?.[_0x2ceda4(0x1ef)]?.['total_xp_points']||'N/A')+_0x2ceda4(0x1e1));if(_0xb8213f)_0x2c3adf[_0x2ceda4(0x1f3)]('User\x20Info\x20Fetched');return _0x5daa6a;}catch(_0xc2af93){this[_0x2ceda4(0x20e)][_0x2ceda4(0x1e0)](_0x2ceda4(0x20b)+_0x2c3adf['id']+_0x2ceda4(0x20a)+_0xc2af93[_0x2ceda4(0x201)]),_0x2c3adf['updateStatus'](_0x2ceda4(0x1d6));throw _0xc2af93;}}async[_0x44b1ec(0x1e9)](_0x387ac8,_0x1afc05,_0x5a10e9,_0x1f2a5f=!![]){const _0xc526ba=_0x44b1ec;if(!_0x1afc05?.[_0xc526ba(0x1ef)]?.[_0xc526ba(0x1c9)])return this[_0xc526ba(0x20e)][_0xc526ba(0x1e0)](_0xc526ba(0x1fb)+_0x5a10e9['id']+':\x20SA\x20address\x20missing\x20for\x20balance.'),_0x5a10e9[_0xc526ba(0x1f3)](_0xc526ba(0x1f6)),_0x5a10e9[_0xc526ba(0x212)](_0xc526ba(0x1f4)),_0xc526ba(0x1f4);try{if(_0x1f2a5f)_0x5a10e9[_0xc526ba(0x1f3)](_0xc526ba(0x1fa));const _0x43c3e9=await this[_0xc526ba(0x1dd)]['fetch'](API_ENDPOINTS[_0xc526ba(0x1ea)],_0xc526ba(0x200),_0xc526ba(0x1f5)+_0x387ac8,{},{'Referer':_0xc526ba(0x1e7)},undefined,_0x5a10e9[_0xc526ba(0x1d1)]);let _0x28b009=_0xc526ba(0x1f4);if(_0x43c3e9[_0xc526ba(0x213)]||!_0x43c3e9[_0xc526ba(0x1d4)]?.[_0xc526ba(0x1d4)]?.[_0xc526ba(0x20d)])this[_0xc526ba(0x20e)]['addDebugMessage'](_0xc526ba(0x1fb)+_0x5a10e9['id']+_0xc526ba(0x202)+(_0x43c3e9['message']||JSON[_0xc526ba(0x1cb)](_0x43c3e9[_0xc526ba(0x1d4)])));else{const _0x1582f3=_0x43c3e9[_0xc526ba(0x1d4)]['data'][_0xc526ba(0x20d)][_0xc526ba(0x1fd)];_0x28b009=typeof _0x1582f3===_0xc526ba(0x1c1)?parseFloat(_0x1582f3)[_0xc526ba(0x20c)](0x4):'N/A';if(_0x1f2a5f)this[_0xc526ba(0x20e)][_0xc526ba(0x1e0)]('[INFO]\x20'+_0x5a10e9['id']+_0xc526ba(0x1f8)+_0x28b009);}_0x5a10e9[_0xc526ba(0x212)](_0x28b009);if(_0x1f2a5f)_0x5a10e9[_0xc526ba(0x1f3)](_0xc526ba(0x1e6));return _0x28b009;}catch(_0x176ed8){this[_0xc526ba(0x20e)][_0xc526ba(0x1e0)](_0xc526ba(0x20b)+_0x5a10e9['id']+_0xc526ba(0x1d5)+_0x176ed8[_0xc526ba(0x201)]),_0x5a10e9[_0xc526ba(0x1f3)](_0xc526ba(0x1ce)),_0x5a10e9['updateSmartAccountBalance'](_0xc526ba(0x1f4));throw _0x176ed8;}}}