const _0x5abf7d=_0x567a;function _0x17a9(){const _0x46f657=['kite','from','floor','updateStatus','130TNxoRg','\x20USDT','712nVrVtw','USER_INFO','signIn','https://testnet.gokite.ai/','...',')\x20fetched.','6a1c35292b7c5b769ff47d89a17e7bc4f0adfe1b462981d28e0e9f7ff20b8f8a','SA\x20Address\x20Missing','concat','stringify','753uvRdIo','Error\x20User\x20Info.\x20Retrying\x20in\x205s...','Error\x20User\x20Info\x20-\x20Max\x20Retries','data','2FdfMov','Getting\x20Balance\x20Info..','5808POewKZ','\x20failed:\x20','userAgent','number','[SUCCESS]\x20User\x20Info\x20(XP:\x20','[WARN]\x20SA\x20address\x20missing\x20for\x20balance.','SignIn\x20FAILED\x20definitively.','fetch','User\x20Info\x20Fetched','91770cTveMa','\x20failed.\x20Waiting\x20','16542702KdOyRR','updateUserInfo','profile','4195965OzGRpx','toFixed','message','Failed\x20to\x20get\x20SA\x20balances.\x20Msg:\x20','balances','SMART_ACCOUNT_BALANCE','[INFO]\x20Starting\x20SignIn\x20process...','dashboard','replace','Failed\x20to\x20get\x20user\x20info:\x20','SignIn\x20Failed\x20-\x20Max\x20Retries','Invalid\x20AES\x20key\x20length.','[WARN]\x20SignIn\x20attempt\x20','490117AtcuCw','usdt','total_xp_points','Signed\x20In\x20Successfully','updateSmartAccountBalances','Error\x20SA\x20Balance','createCipheriv','707985oPjHIZ','getSmartAccountBalance','[SUCCESS]\x20SignIn\x20successful.','addDebugMessage','API\x20Error\x20','string','test','Getting\x20User\x20Info..','substring','\x20KITE,\x20','SIGN_IN','GET','min','Failed\x20to\x20generate\x20AES\x20key\x20for\x20sign-in.','access_token','randomBytes','api','[WARN]\x20GetUserInfo\x20attempt\x20','round','smart_account_address','N/A','[SUCCESS]\x20SA\x20Balances:\x20','POST','[ERROR]\x20','SA\x20Balance\x20Fetched','aes-256-gcm','toString','SignIn\x20Fail\x20','getAuthTag','[ERROR]\x20GetUserInfo\x20failed\x20after\x20all\x20retries.','Error\x20generating\x20AES\x20Key\x20for\x20SignIn:','length','133cFZkap','error'];_0x17a9=function(){return _0x46f657;};return _0x17a9();}(function(_0x1ef51c,_0x156e1b){const _0x5e972c=_0x567a,_0x9746fe=_0x1ef51c();while(!![]){try{const _0xe548fa=-parseInt(_0x5e972c(0xb8))/0x1*(parseInt(_0x5e972c(0x9b))/0x2)+parseInt(_0x5e972c(0x97))/0x3*(-parseInt(_0x5e972c(0xe7))/0x4)+parseInt(_0x5e972c(0xab))/0x5+parseInt(_0x5e972c(0xa6))/0x6+parseInt(_0x5e972c(0xdf))/0x7*(parseInt(_0x5e972c(0x9d))/0x8)+parseInt(_0x5e972c(0xbf))/0x9*(-parseInt(_0x5e972c(0xe5))/0xa)+parseInt(_0x5e972c(0xa8))/0xb;if(_0xe548fa===_0x156e1b)break;else _0x9746fe['push'](_0x9746fe['shift']());}catch(_0xa15fe5){_0x9746fe['push'](_0x9746fe['shift']());}}}(_0x17a9,0xc6e84));import _0x3da86a from'crypto';import{API_ENDPOINTS as _0x43ceaf}from'../core/api.js';let SIGNIN_MAX_MAJOR_ATTEMPTS=0x5,SIGNIN_MAX_MINOR_ATTEMPTS=0x5,SIGNIN_MINOR_RETRY_DELAY_MS=0x7530,SIGNIN_MAJOR_RETRY_DELAY_MS=0x1b7740,SIGNIN_AES_HEX_KEY='6a1c35292b7c5b769ff47d89a17e7bc4f0adfe1b462981d28e0e9f7ff20b8f8a';async function pureDelay(_0x44057d){return new Promise(_0x6cc7db=>setTimeout(_0x6cc7db,_0x44057d));}function msToTime(_0x33a8c2){const _0x5a182d=_0x567a;return Math['floor'](_0x33a8c2/0x36ee80)+'h\x20'+Math[_0x5a182d(0xe3)](_0x33a8c2%0x36ee80/0xea60)+'m\x20'+Math[_0x5a182d(0xd1)](_0x33a8c2%0xea60/0x3e8)+'s';}async function generateAES256GCMKey(_0x435c88,_0x3edae4){const _0x363556=_0x567a;try{let _0x1fd6af=Buffer[_0x363556(0xe2)](_0x3edae4,'hex');if(0x20!==_0x1fd6af[_0x363556(0xde)])throw Error(_0x363556(0xb6));let _0x4819bd=_0x3da86a[_0x363556(0xce)](0xc),_0x456901=_0x3da86a[_0x363556(0xbe)](_0x363556(0xd8),_0x1fd6af,_0x4819bd,{'authTagLength':0x10}),_0xc39d60=Buffer[_0x363556(0x95)]([_0x456901['update'](Buffer[_0x363556(0xe2)](_0x435c88)),_0x456901['final']()]),_0x16fc52=_0x456901[_0x363556(0xdb)]();return Buffer[_0x363556(0x95)]([_0x4819bd,_0xc39d60,_0x16fc52])[_0x363556(0xd9)]('hex');}catch(_0x5f13a5){return console[_0x363556(0xe0)](_0x363556(0xdd),_0x5f13a5[_0x363556(0xad)]),null;}}export function isPrivateKey(_0x40f37d){const _0x5d0d05=_0x567a;if(_0x5d0d05(0xc4)!=typeof _0x40f37d)return!0x1;let _0x1ac9fd=_0x40f37d[_0x5d0d05(0xb3)](/^0x/,'');return/^[a-fA-F0-9]{64}$/[_0x5d0d05(0xc5)](_0x1ac9fd);}function _0x567a(_0x576687,_0x5b80b4){const _0x17a957=_0x17a9();return _0x567a=function(_0x567a57,_0xf19624){_0x567a57=_0x567a57-0x93;let _0xf37008=_0x17a957[_0x567a57];return _0xf37008;},_0x567a(_0x576687,_0x5b80b4);}export class SignInService{constructor(_0x454624,_0x45a6a7){const _0xe40906=_0x567a;this[_0xe40906(0xcf)]=_0x454624,this[_0xe40906(0xb2)]=_0x45a6a7;}async[_0x5abf7d(0xe9)](_0x32ecf3,_0x3e065c){const _0x1b5d34=_0x5abf7d;let _0x45f489=null;this[_0x1b5d34(0xb2)][_0x1b5d34(0xc2)](_0x1b5d34(0xb1));for(let _0xb76085=0x1;_0xb76085<=0x5;_0xb76085++){for(let _0x28a038=0x1;_0x28a038<=0x5;_0x28a038++){let _0x3d98e5=_0xb76085+'.'+_0x28a038;_0x3e065c[_0x1b5d34(0xe4)]('SignIn\x20Att\x20'+_0x3d98e5);try{let _0x41dd16=await generateAES256GCMKey(_0x32ecf3,_0x1b5d34(0x93));if(!_0x41dd16)throw Error(_0x1b5d34(0xcc));let _0x5426f9=await this[_0x1b5d34(0xcf)]['fetch'](_0x43ceaf[_0x1b5d34(0xc9)],_0x1b5d34(0xd5),_0x41dd16,{'eoa':_0x32ecf3},{},void 0x0,_0x3e065c['userAgent']);if(_0x5426f9[_0x1b5d34(0xe0)])throw Error(_0x1b5d34(0xc3)+_0x5426f9['status']+':\x20'+(_0x5426f9[_0x1b5d34(0xad)]||JSON[_0x1b5d34(0x96)](_0x5426f9[_0x1b5d34(0x9a)])));if(_0x5426f9['data']?.[_0x1b5d34(0x9a)]?.[_0x1b5d34(0xcd)])return _0x45f489=_0x5426f9['data']['data'][_0x1b5d34(0xcd)],this[_0x1b5d34(0xb2)][_0x1b5d34(0xc2)](_0x1b5d34(0xc1)),_0x3e065c[_0x1b5d34(0xe4)](_0x1b5d34(0xbb)),_0x45f489;throw Error('Sign-in\x20response\x20invalid:\x20'+JSON['stringify'](_0x5426f9[_0x1b5d34(0x9a)])[_0x1b5d34(0xc7)](0x0,0x64));}catch(_0x3edf48){this[_0x1b5d34(0xb2)]['addDebugMessage'](_0x1b5d34(0xb7)+_0x3d98e5+_0x1b5d34(0x9e)+_0x3edf48[_0x1b5d34(0xad)][_0x1b5d34(0xc7)](0x0,0x64)+'...'),_0x3e065c[_0x1b5d34(0xe4)](_0x1b5d34(0xda)+_0x3d98e5),_0x28a038<0x5&&await pureDelay(0x7530);}}if(_0x45f489)return _0x45f489;if(_0xb76085<0x5){this['dashboard'][_0x1b5d34(0xc2)]('[INFO]\x20SignIn\x20cycle\x20'+_0xb76085+_0x1b5d34(0xa7)+msToTime(0x1b7740)+_0x1b5d34(0xeb));let _0x375973=0x1b7740;for(;_0x375973>0x0;)_0x3e065c[_0x1b5d34(0xe4)]('SignIn\x20Cooldown:\x20'+msToTime(_0x375973)),await pureDelay(Math[_0x1b5d34(0xcb)](_0x375973,0x1388)),_0x375973-=0x1388;}}if(!_0x45f489){let _0x14aef2=_0x1b5d34(0xa3);throw this['dashboard']['addDebugMessage'](_0x1b5d34(0xd6)+_0x14aef2),_0x3e065c[_0x1b5d34(0xe4)](_0x1b5d34(0xb5)),Error(_0x14aef2);}return _0x45f489;}async['getUserInfo'](_0x1234bb,_0x2fdb95,_0x547270=!0x0){const _0x4b8d87=_0x5abf7d;let _0x21d653=[0xea60,0x15f90,0x1d4c0];for(let _0x1220ad=0x0;_0x1220ad<_0x21d653[_0x4b8d87(0xde)];_0x1220ad++)try{_0x547270&&_0x2fdb95[_0x4b8d87(0xe4)](_0x4b8d87(0xc6));let _0x52cbc9=await this[_0x4b8d87(0xcf)]['fetch'](_0x43ceaf[_0x4b8d87(0xe8)],_0x4b8d87(0xca),'Bearer\x20'+_0x1234bb,{},{},_0x21d653[_0x1220ad],_0x2fdb95[_0x4b8d87(0x9f)]);if(_0x52cbc9[_0x4b8d87(0xe0)]||!_0x52cbc9[_0x4b8d87(0x9a)]?.[_0x4b8d87(0x9a)])throw Error(_0x4b8d87(0xb4)+(_0x52cbc9[_0x4b8d87(0xad)]||JSON[_0x4b8d87(0x96)](_0x52cbc9[_0x4b8d87(0x9a)])));let _0x13543c=_0x52cbc9['data']['data'];return _0x2fdb95[_0x4b8d87(0xa9)](_0x13543c),_0x547270&&this[_0x4b8d87(0xb2)]['addDebugMessage'](_0x4b8d87(0xa1)+(_0x13543c?.[_0x4b8d87(0xaa)]?.[_0x4b8d87(0xba)]||'N/A')+_0x4b8d87(0xec)),_0x547270&&_0x2fdb95[_0x4b8d87(0xe4)](_0x4b8d87(0xa5)),_0x13543c;}catch(_0x5ac582){if(this[_0x4b8d87(0xb2)][_0x4b8d87(0xc2)](_0x4b8d87(0xd0)+(_0x1220ad+0x1)+'\x20failed.\x20Error:\x20'+_0x5ac582['message']),_0x1220ad<_0x21d653['length']-0x1)_0x2fdb95[_0x4b8d87(0xe4)](_0x4b8d87(0x98)),await pureDelay(0x1388);else throw this['dashboard'][_0x4b8d87(0xc2)](_0x4b8d87(0xdc)),_0x2fdb95[_0x4b8d87(0xe4)](_0x4b8d87(0x99)),_0x5ac582;}}async[_0x5abf7d(0xc0)](_0x42f68a,_0x1ebd34,_0x39dd7a,_0x2b629e=!0x0){const _0x52ab3c=_0x5abf7d;if(!_0x1ebd34?.['profile']?.[_0x52ab3c(0xd2)])return this['dashboard']['addDebugMessage'](_0x52ab3c(0xa2)),_0x39dd7a['updateStatus'](_0x52ab3c(0x94)),_0x39dd7a[_0x52ab3c(0xbc)]({'kite':_0x52ab3c(0xd3),'usdt':'N/A'}),{'kite':_0x52ab3c(0xd3),'usdt':_0x52ab3c(0xd3)};let _0x19dce6=[0xea60,0x15f90,0x1d4c0];for(let _0x2978f0=0x0;_0x2978f0<_0x19dce6[_0x52ab3c(0xde)];_0x2978f0++)try{_0x2b629e&&_0x39dd7a[_0x52ab3c(0xe4)](_0x52ab3c(0x9c));let _0x4020cb=await this[_0x52ab3c(0xcf)][_0x52ab3c(0xa4)](_0x43ceaf[_0x52ab3c(0xb0)],_0x52ab3c(0xca),'Bearer\x20'+_0x42f68a,{},{'Referer':_0x52ab3c(0xea)},_0x19dce6[_0x2978f0],_0x39dd7a[_0x52ab3c(0x9f)]);if(_0x4020cb[_0x52ab3c(0xe0)]||!_0x4020cb[_0x52ab3c(0x9a)]?.[_0x52ab3c(0x9a)]?.[_0x52ab3c(0xaf)])throw Error(_0x52ab3c(0xae)+(_0x4020cb[_0x52ab3c(0xad)]||JSON[_0x52ab3c(0x96)](_0x4020cb['data'])));let _0x4e550d=_0x4020cb[_0x52ab3c(0x9a)][_0x52ab3c(0x9a)][_0x52ab3c(0xaf)],_0x20800c=_0x52ab3c(0xa0)==typeof _0x4e550d[_0x52ab3c(0xe1)]?parseFloat(_0x4e550d[_0x52ab3c(0xe1)])[_0x52ab3c(0xac)](0x4):_0x52ab3c(0xd3),_0x419720=_0x52ab3c(0xa0)==typeof _0x4e550d[_0x52ab3c(0xb9)]?parseFloat(_0x4e550d['usdt'])[_0x52ab3c(0xac)](0x4):'0';return _0x2b629e&&this[_0x52ab3c(0xb2)]['addDebugMessage'](_0x52ab3c(0xd4)+_0x20800c+_0x52ab3c(0xc8)+_0x419720+_0x52ab3c(0xe6)),_0x39dd7a['updateSmartAccountBalances'](_0x4e550d),_0x2b629e&&_0x39dd7a[_0x52ab3c(0xe4)](_0x52ab3c(0xd7)),_0x4e550d;}catch(_0x51d82d){if(this[_0x52ab3c(0xb2)]['addDebugMessage']('[WARN]\x20GetSmartAccountBalance\x20attempt\x20'+(_0x2978f0+0x1)+'\x20failed:\x20'+_0x51d82d[_0x52ab3c(0xad)]),_0x2978f0<_0x19dce6[_0x52ab3c(0xde)]-0x1)await pureDelay(0x1388);else throw this['dashboard']['addDebugMessage']('[ERROR]\x20GetSmartAccountBalance\x20failed\x20after\x20all\x20retries.'),_0x39dd7a[_0x52ab3c(0xe4)](_0x52ab3c(0xbd)),_0x39dd7a[_0x52ab3c(0xbc)]({'kite':_0x52ab3c(0xd3),'usdt':'N/A'}),_0x51d82d;}}}