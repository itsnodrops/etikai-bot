const _0xd20f36=_0x5305;(function(_0x386ed4,_0x28b0dd){const _0x40584d=_0x5305,_0x40d720=_0x386ed4();while(!![]){try{const _0x534c33=parseInt(_0x40584d(0x192))/0x1*(-parseInt(_0x40584d(0x178))/0x2)+-parseInt(_0x40584d(0x153))/0x3*(-parseInt(_0x40584d(0x188))/0x4)+-parseInt(_0x40584d(0x18b))/0x5+parseInt(_0x40584d(0x199))/0x6+parseInt(_0x40584d(0x185))/0x7*(parseInt(_0x40584d(0x170))/0x8)+parseInt(_0x40584d(0x177))/0x9*(parseInt(_0x40584d(0x19b))/0xa)+-parseInt(_0x40584d(0x193))/0xb;if(_0x534c33===_0x28b0dd)break;else _0x40d720['push'](_0x40d720['shift']());}catch(_0x3a3515){_0x40d720['push'](_0x40d720['shift']());}}}(_0x169d,0xc8cb1));function _0x5305(_0x1bf06e,_0x13b0fe){const _0x169d7c=_0x169d();return _0x5305=function(_0x530545,_0x240d7f){_0x530545=_0x530545-0x14e;let _0x2b8e41=_0x169d7c[_0x530545];return _0x2b8e41;},_0x5305(_0x1bf06e,_0x13b0fe);}import _0x5acafb from'crypto';import{API_ENDPOINTS}from'../core/api.js';const SIGNIN_MAX_MAJOR_ATTEMPTS=0x5,SIGNIN_MAX_MINOR_ATTEMPTS=0x5,SIGNIN_MINOR_RETRY_DELAY_MS=0x1e*0x3e8,SIGNIN_MAJOR_RETRY_DELAY_MS=0x1e*0x3c*0x3e8,SIGNIN_AES_HEX_KEY='6a1c35292b7c5b769ff47d89a17e7bc4f0adfe1b462981d28e0e9f7ff20b8f8a';async function pureDelay(_0x4d44f3){return new Promise(_0x489f65=>setTimeout(_0x489f65,_0x4d44f3));}function msToTime(_0x246f0e){const _0x346a41=_0x5305,_0x3c21f9=Math[_0x346a41(0x19c)](_0x246f0e/0x36ee80),_0xc4812f=Math['floor'](_0x246f0e%0x36ee80/0xea60),_0x4fc453=Math['round'](_0x246f0e%0xea60/0x3e8);return _0x3c21f9+'h\x20'+_0xc4812f+'m\x20'+_0x4fc453+'s';}async function generateAES256GCMKey(_0x41b212,_0x51f50e){const _0x54421e=_0x5305;try{const _0x547134=Buffer[_0x54421e(0x187)](_0x51f50e,_0x54421e(0x198));if(_0x547134['length']!==0x20)throw new Error('Invalid\x20AES\x20key\x20length.');const _0x4e97f6=_0x5acafb['randomBytes'](0xc),_0x918567=_0x5acafb[_0x54421e(0x15f)](_0x54421e(0x17e),_0x547134,_0x4e97f6,{'authTagLength':0x10}),_0x5c23f1=Buffer['concat']([_0x918567[_0x54421e(0x157)](Buffer[_0x54421e(0x187)](_0x41b212)),_0x918567[_0x54421e(0x169)]()]),_0x414b4d=_0x918567[_0x54421e(0x186)]();return Buffer[_0x54421e(0x161)]([_0x4e97f6,_0x5c23f1,_0x414b4d])[_0x54421e(0x167)](_0x54421e(0x198));}catch(_0x5f4809){return console[_0x54421e(0x190)](_0x54421e(0x17c),_0x5f4809[_0x54421e(0x171)]),null;}}export function isPrivateKey(_0x474be8){const _0x24d61e=_0x5305;if(typeof _0x474be8!==_0x24d61e(0x175))return![];const _0x164e7c=_0x474be8[_0x24d61e(0x17f)](/^0x/,'');return/^[a-fA-F0-9]{64}$/['test'](_0x164e7c);}export class SignInService{constructor(_0x3a66e5,_0x3a05ca){const _0x1fd6c3=_0x5305;this[_0x1fd6c3(0x162)]=_0x3a66e5,this[_0x1fd6c3(0x196)]=_0x3a05ca;}async[_0xd20f36(0x15a)](_0xa22f4e,_0x46959e){const _0x1d1357=_0xd20f36;let _0x4e129a=null;this['dashboard'][_0x1d1357(0x15d)](_0x1d1357(0x195));for(let _0x3e1f0a=0x1;_0x3e1f0a<=SIGNIN_MAX_MAJOR_ATTEMPTS;_0x3e1f0a++){for(let _0x4a9bfc=0x1;_0x4a9bfc<=SIGNIN_MAX_MINOR_ATTEMPTS;_0x4a9bfc++){const _0x5ac395=_0x3e1f0a+'.'+_0x4a9bfc;_0x46959e['updateStatus']('SignIn\x20Attempt\x20'+_0x5ac395);try{const _0x456af0=await generateAES256GCMKey(_0xa22f4e,SIGNIN_AES_HEX_KEY);if(!_0x456af0)throw new Error('Failed\x20to\x20generate\x20AES\x20key\x20for\x20sign-in.');const _0x5d5aa4=await this[_0x1d1357(0x162)][_0x1d1357(0x158)](API_ENDPOINTS[_0x1d1357(0x166)],'POST',_0x456af0,{'eoa':_0xa22f4e},{},undefined,_0x46959e['userAgent']);if(_0x5d5aa4[_0x1d1357(0x190)])throw new Error(_0x1d1357(0x184)+_0x5d5aa4[_0x1d1357(0x168)]+':\x20'+(_0x5d5aa4['message']||JSON[_0x1d1357(0x17a)](_0x5d5aa4[_0x1d1357(0x19d)])));if(_0x5d5aa4[_0x1d1357(0x19d)]?.[_0x1d1357(0x19d)]?.['access_token'])return _0x4e129a=_0x5d5aa4[_0x1d1357(0x19d)][_0x1d1357(0x19d)][_0x1d1357(0x164)],this[_0x1d1357(0x196)]['addDebugMessage'](_0x1d1357(0x16f)),_0x46959e[_0x1d1357(0x191)]('Signed\x20In\x20Successfully'),_0x4e129a;else throw new Error(_0x1d1357(0x19f)+JSON[_0x1d1357(0x17a)](_0x5d5aa4[_0x1d1357(0x19d)])['substring'](0x0,0x64));}catch(_0x1b3c70){this[_0x1d1357(0x196)][_0x1d1357(0x15d)](_0x1d1357(0x194)+_0x5ac395+_0x1d1357(0x18e)+_0x1b3c70[_0x1d1357(0x171)][_0x1d1357(0x16b)](0x0,0x64)+_0x1d1357(0x159)),_0x46959e[_0x1d1357(0x191)](_0x1d1357(0x181)+_0x5ac395),_0x4a9bfc<SIGNIN_MAX_MINOR_ATTEMPTS&&await pureDelay(SIGNIN_MINOR_RETRY_DELAY_MS);}}if(_0x4e129a)return _0x4e129a;if(_0x3e1f0a<SIGNIN_MAX_MAJOR_ATTEMPTS){this[_0x1d1357(0x196)][_0x1d1357(0x15d)](_0x1d1357(0x160)+_0x3e1f0a+_0x1d1357(0x16c)+msToTime(SIGNIN_MAJOR_RETRY_DELAY_MS)+_0x1d1357(0x159));let _0x22d559=SIGNIN_MAJOR_RETRY_DELAY_MS;while(_0x22d559>0x0){_0x46959e[_0x1d1357(0x191)](_0x1d1357(0x182)+msToTime(_0x22d559)),await pureDelay(Math[_0x1d1357(0x18d)](_0x22d559,0x1388)),_0x22d559-=0x1388;}}}if(!_0x4e129a){const _0x35277d=_0x1d1357(0x197);this['dashboard'][_0x1d1357(0x15d)](_0x1d1357(0x176)+_0x35277d),_0x46959e[_0x1d1357(0x191)](_0x1d1357(0x180));throw new Error(_0x35277d);}return _0x4e129a;}async['getUserInfo'](_0x1c54d6,_0x5872ad,_0x567f18=!![]){const _0x48cf48=_0xd20f36,_0x54892e=[0xea60,0x15f90,0x1d4c0];for(let _0x44328d=0x0;_0x44328d<_0x54892e[_0x48cf48(0x16e)];_0x44328d++){try{_0x567f18&&_0x5872ad[_0x48cf48(0x191)](_0x48cf48(0x15c));const _0x2ac6f4=await this[_0x48cf48(0x162)][_0x48cf48(0x158)](API_ENDPOINTS['USER_INFO'],_0x48cf48(0x173),'Bearer\x20'+_0x1c54d6,{},{},_0x54892e[_0x44328d],_0x5872ad['userAgent']);if(_0x2ac6f4[_0x48cf48(0x190)]||!_0x2ac6f4['data']?.[_0x48cf48(0x19d)])throw new Error(_0x48cf48(0x14e)+(_0x2ac6f4['message']||JSON[_0x48cf48(0x17a)](_0x2ac6f4['data'])));const _0x5a0c6a=_0x2ac6f4['data'][_0x48cf48(0x19d)];_0x5872ad[_0x48cf48(0x189)](_0x5a0c6a);if(_0x567f18)this['dashboard']['addDebugMessage'](_0x48cf48(0x152)+(_0x5a0c6a?.[_0x48cf48(0x15e)]?.[_0x48cf48(0x19e)]||_0x48cf48(0x163))+_0x48cf48(0x172));if(_0x567f18)_0x5872ad[_0x48cf48(0x191)](_0x48cf48(0x151));return _0x5a0c6a;}catch(_0x1c49d0){this[_0x48cf48(0x196)][_0x48cf48(0x15d)](_0x48cf48(0x17d)+(_0x44328d+0x1)+_0x48cf48(0x15b)+_0x1c49d0['message']);if(_0x44328d<_0x54892e[_0x48cf48(0x16e)]-0x1){const _0x296394=0x1388;_0x5872ad[_0x48cf48(0x191)]('Error\x20User\x20Info.\x20Retrying\x20in\x20'+_0x296394/0x3e8+'s...'),await pureDelay(_0x296394);}else{this[_0x48cf48(0x196)]['addDebugMessage']('[ERROR]\x20GetUserInfo\x20failed\x20after\x20all\x20retries.'),_0x5872ad['updateStatus']('Error\x20User\x20Info\x20-\x20Max\x20Retries');throw _0x1c49d0;}}}}async['getSmartAccountBalance'](_0x142630,_0x4fa332,_0x45e961,_0x541486=!![]){const _0xd5fdaf=_0xd20f36;if(!_0x4fa332?.['profile']?.['smart_account_address'])return this[_0xd5fdaf(0x196)][_0xd5fdaf(0x15d)](_0xd5fdaf(0x17b)),_0x45e961[_0xd5fdaf(0x191)](_0xd5fdaf(0x18f)),_0x45e961['updateSmartAccountBalances']({'kite':_0xd5fdaf(0x163),'usdt':'N/A'}),{'kite':'N/A','usdt':_0xd5fdaf(0x163)};const _0x5584ca=[0xea60,0x15f90,0x1d4c0];for(let _0x25ea2b=0x0;_0x25ea2b<_0x5584ca[_0xd5fdaf(0x16e)];_0x25ea2b++){try{if(_0x541486)_0x45e961[_0xd5fdaf(0x191)](_0xd5fdaf(0x18c));const _0x1191d3=await this[_0xd5fdaf(0x162)]['fetch'](API_ENDPOINTS[_0xd5fdaf(0x154)],_0xd5fdaf(0x173),'Bearer\x20'+_0x142630,{},{'Referer':_0xd5fdaf(0x16d)},_0x5584ca[_0x25ea2b],_0x45e961[_0xd5fdaf(0x156)]);if(_0x1191d3[_0xd5fdaf(0x190)]||!_0x1191d3[_0xd5fdaf(0x19d)]?.[_0xd5fdaf(0x19d)]?.[_0xd5fdaf(0x19a)])throw new Error(_0xd5fdaf(0x150)+(_0x1191d3['message']||JSON[_0xd5fdaf(0x17a)](_0x1191d3['data'])));const _0xbc4071=_0x1191d3[_0xd5fdaf(0x19d)][_0xd5fdaf(0x19d)][_0xd5fdaf(0x19a)],_0x26ec0b=typeof _0xbc4071[_0xd5fdaf(0x165)]===_0xd5fdaf(0x14f)?parseFloat(_0xbc4071['kite'])[_0xd5fdaf(0x155)](0x4):_0xd5fdaf(0x163),_0x49ed26=typeof _0xbc4071[_0xd5fdaf(0x183)]===_0xd5fdaf(0x14f)?parseFloat(_0xbc4071[_0xd5fdaf(0x183)])[_0xd5fdaf(0x155)](0x4):'0';if(_0x541486)this['dashboard'][_0xd5fdaf(0x15d)](_0xd5fdaf(0x16a)+_0x26ec0b+_0xd5fdaf(0x174)+_0x49ed26+_0xd5fdaf(0x179));_0x45e961[_0xd5fdaf(0x1a0)](_0xbc4071);if(_0x541486)_0x45e961[_0xd5fdaf(0x191)]('SA\x20Balance\x20Fetched');return _0xbc4071;}catch(_0x491882){this[_0xd5fdaf(0x196)][_0xd5fdaf(0x15d)]('[WARN]\x20GetSmartAccountBalance\x20attempt\x20'+(_0x25ea2b+0x1)+_0xd5fdaf(0x18e)+_0x491882[_0xd5fdaf(0x171)]);if(_0x25ea2b<_0x5584ca['length']-0x1)await pureDelay(0x1388);else{this[_0xd5fdaf(0x196)][_0xd5fdaf(0x15d)]('[ERROR]\x20GetSmartAccountBalance\x20failed\x20after\x20all\x20retries.'),_0x45e961['updateStatus'](_0xd5fdaf(0x18a)),_0x45e961[_0xd5fdaf(0x1a0)]({'kite':_0xd5fdaf(0x163),'usdt':_0xd5fdaf(0x163)});throw _0x491882;}}}}}function _0x169d(){const _0x51ad9d=['message',')\x20fetched.','GET','\x20KITE,\x20','string','[ERROR]\x20','63AbCHOd','2SQTvez','\x20USDT','stringify','[WARN]\x20SA\x20address\x20missing\x20for\x20balance.','Error\x20generating\x20AES\x20Key\x20for\x20SignIn:','[WARN]\x20GetUserInfo\x20attempt\x20','aes-256-gcm','replace','SignIn\x20Failed\x20-\x20Max\x20Retries','SignIn\x20Fail\x20','SignIn\x20Cooldown:\x20','usdt','API\x20Error\x20','671776khzKsl','getAuthTag','from','996aGOcmt','updateUserInfo','Error\x20SA\x20Balance','5621475xHrtnq','Getting\x20Balance\x20Info..','min','\x20failed:\x20','SA\x20Address\x20Missing','error','updateStatus','1038067ysNNRZ','13112253jfzQZL','[WARN]\x20SignIn\x20attempt\x20','[INFO]\x20Starting\x20SignIn\x20process...','dashboard','SignIn\x20FAILED\x20definitively.','hex','7362000QGYYyl','balances','740990omGeKo','floor','data','total_xp_points','Sign-in\x20response\x20invalid:\x20','updateSmartAccountBalances','Failed\x20to\x20get\x20user\x20info:\x20','number','Failed\x20to\x20get\x20SA\x20balances.\x20Msg:\x20','User\x20Info\x20Fetched','[SUCCESS]\x20User\x20Info\x20(XP:\x20','10791kPbadq','SMART_ACCOUNT_BALANCE','toFixed','userAgent','update','fetch','...','signIn','\x20failed.\x20Error:\x20','Getting\x20User\x20Info..','addDebugMessage','profile','createCipheriv','[INFO]\x20SignIn\x20cycle\x20','concat','api','N/A','access_token','kite','SIGN_IN','toString','status','final','[SUCCESS]\x20SA\x20Balances:\x20','substring','\x20failed.\x20Waiting\x20','https://testnet.gokite.ai/','length','[SUCCESS]\x20SignIn\x20successful.','128wgvtaA'];_0x169d=function(){return _0x51ad9d;};return _0x169d();}