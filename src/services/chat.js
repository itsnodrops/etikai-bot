const _0x2cb809=_0xba96;(function(_0x287a6a,_0x3d717c){const _0x1baebc=_0xba96,_0x1c94d6=_0x287a6a();while(!![]){try{const _0x3ca9b7=-parseInt(_0x1baebc(0xf7))/0x1*(-parseInt(_0x1baebc(0x87))/0x2)+-parseInt(_0x1baebc(0x78))/0x3*(parseInt(_0x1baebc(0xd5))/0x4)+-parseInt(_0x1baebc(0xaf))/0x5*(parseInt(_0x1baebc(0xfd))/0x6)+-parseInt(_0x1baebc(0x96))/0x7+-parseInt(_0x1baebc(0xef))/0x8+-parseInt(_0x1baebc(0x85))/0x9+parseInt(_0x1baebc(0xcd))/0xa;if(_0x3ca9b7===_0x3d717c)break;else _0x1c94d6['push'](_0x1c94d6['shift']());}catch(_0x234875){_0x1c94d6['push'](_0x1c94d6['shift']());}}}(_0x3758,0x1b59d));import _0x2c6aef from'axios';import{ethers}from'ethers';import{Config}from'../../config.js';import{API_ENDPOINTS}from'../core/api.js';import{NETWORKS}from'../core/network.js';import _0x21c6be from'moment-timezone';const GENERAL_MAX_ATTEMPTS=0x3,CHAT_TIMEOUT_MS=0x493e0,AGENT_OVERLOAD_MESSAGE=_0x2cb809(0x100),AGENT_UNAVAILABLE_SKIP_ERROR_PREFIX=_0x2cb809(0xd8),SHERLOCK_AGENT_NAME=_0x2cb809(0x98),FALLBACK_QUESTIONS=['Tell\x20me\x20about\x20yourself.',_0x2cb809(0xed),_0x2cb809(0x8a),_0x2cb809(0x79)],MIN_CHATS_PER_AGENT_SESSION=0xa,MAX_CHATS_PER_AGENT_SESSION=0xf,DELAY_BETWEEN_CHAT_INTERACTIONS_MIN_SEC=0x2d,DELAY_BETWEEN_CHAT_INTERACTIONS_MAX_SEC=0x41,DELAY_BETWEEN_AGENT_SESSIONS_SEC=0xf;function _0xba96(_0x2c261f,_0x47b2e8){const _0x375872=_0x3758();return _0xba96=function(_0xba96de,_0x4985d4){_0xba96de=_0xba96de-0x76;let _0x5dec47=_0x375872[_0xba96de];return _0x5dec47;},_0xba96(_0x2c261f,_0x47b2e8);}function random(_0x5cb080,_0x1a7e31){const _0x486d9a=_0x2cb809;return Math['floor'](Math[_0x486d9a(0xb8)]()*(_0x1a7e31-_0x5cb080+0x1))+_0x5cb080;}function _0x3758(){const _0x1e2236=['response','[INFO]\x20ChatService\x20(Sherlock):\x20Fetching\x20latest\x20TXs\x20from\x20','Room','performMultipleChatInteractions','[WARN]\x20No\x20PREFERRED_AGENTS.\x20Skipping\x20chats.','Bearer\x20','[INFO]\x20Agent\x20','MMDD','[WARN]\x20None\x20of\x20PREFERRED_AGENTS\x20active/found.\x20Skipping\x20chats.','name','Chat\x20','...','displayed_name','INTERNAL_STREAM_EMPTY_DUE_TO_OVERLOAD','getRandomQuestion','[INFO]\x20Beginning\x20','POST','104001JRwSFp','What\x20is\x20a\x20common\x20misconception\x20about\x20AI?','\x20(try\x20','Unknown\x20chat\x20error','...\x22','choices','string','updateStatus','service_id','aiveronica','AGENT_INFERENCE','utf8','Agent\x20Configs\x20Fetched','1872756XNDqBa','deployment','72944CTxlvs','txHashesCache','\x20returned\x20','Can\x20you\x20give\x20me\x20a\x20random\x20interesting\x20fact?','What\x20is\x20new?','parse','hash','api','getRandomWaifuQuestion','status','\x20TX\x20hashes\x20from\x20block\x20','No\x20textual\x20response\x20received.','[WARN]\x20Agent\x20','Waiting\x20for\x20the\x20next\x20chat...','No\x20data\x20or\x20invalid\x20reply\x20format','289114BNLkHr','text/plain','Sherlock','Active','eoaAddress','stringify','fetchLatestTransactionHashesForSherlock','\x27\x20in\x20subnet\x20\x27','No\x20preferred\x20agents\x20for\x20chat','profile','_adaptedChatWithAI','_truncateText','[ERROR]\x20Failed\x20chat\x20with\x20','userAgent','content','https://testnet.gokite.ai/','RPC_URL','txFetcherProvider','[INFO]\x20Sending\x20chat\x20to\x20','\x20(streaming...)','GET','JsonRpcProvider','size','subnet','names','15OOQIYt','startsWith','PREFERRED_AGENTS','What\x20do\x20you\x20think\x20of\x20this\x20transaction?\x200x252c02bded9a24426219248c9c1b065b752d3cf8bedf4902ed62245ab950895b','):\x20','post','has','toLowerCase','s\x20before\x20next\x20agent\x20session...','random','\x20issue.\x20Signaling\x20skip.','end','getAvailableAgents','data:','\x20with\x20','\x20successful.','clear','floor','message','split','includes','NAME','agents','SUBMIT_RECEIPT','Chatting\x20with\x20','some','[WARN]\x20GetAvailableAgents\x20attempt\x20','.\x20Signaling\x20skip.','data','MIN_CHATS','5214280mIbWym','\x20failed:\x20','toString','flatMap','fetch','[INFO]\x20ChatService\x20(Sherlock):\x20Cached\x20','\x20failed\x20with\x20status\x20','isArray','8NhaomO','transactions','INTERNAL_OVERLOAD_AS_RESPONSE_CONTENT','AGENT\x20UNAVAILABLE','[SUCCESS]\x20Chat\x20with\x20','[DONE]','addDebugMessage','getRandomTransactionHashForSherlock','\x20chats\x20with\x20','slice','groqService','[INFO]\x20Found\x20active\x20preferred\x20agent\x20\x27','dashboard','SUBNET_AGENTS','[SUCCESS]\x20Agent\x20config\x20scan\x20complete.\x20Found\x20','agentNameToDeploymentIdMap','pop','MAX_CHATS','get','length','addChatLog','Could\x20not\x20fetch\x20agent\x20list.\x20Msg:\x20','Interaction\x20Error:\x20','[SUCCESS]\x20Finished\x20session\x20with\x20','What\x20are\x20the\x20core\x20principles\x20of\x20Web3?','trim','370592fWBGJF','[ERROR]\x20Chat\x20','getBlock','delta','[WARN]\x20ChatService\x20(Sherlock):\x20No\x20TX\x20hashes\x20in\x20cache.','username','All\x20Agent\x20Chat\x20Sessions\x20Done','BASE_SEPOLIA','3irsKkj',':AgentSpecificErrorSkip','filter','reply','Preferred\x20agents\x20not\x20active','application/json','307542AZaVBl','prefetchedTransactions','\x20preferred\x20agent(s).','error:\x20Failed\x20to\x20stream\x20response:\x20Model\x20is\x20overloaded','map','error'];_0x3758=function(){return _0x1e2236;};return _0x3758();}function shuffleArray(_0x24b25c){const _0x130ba=_0x2cb809;for(let _0x6c89f5=_0x24b25c[_0x130ba(0xe8)]-0x1;_0x6c89f5>0x0;_0x6c89f5--){const _0x4d758a=Math['floor'](Math['random']()*(_0x6c89f5+0x1));[_0x24b25c[_0x6c89f5],_0x24b25c[_0x4d758a]]=[_0x24b25c[_0x4d758a],_0x24b25c[_0x6c89f5]];}return _0x24b25c;}function randomFromArray(_0x2b204a){const _0x8cf39d=_0x2cb809;if(!Array[_0x8cf39d(0xd4)](_0x2b204a)||_0x2b204a[_0x8cf39d(0xe8)]===0x0)return undefined;return _0x2b204a[Math[_0x8cf39d(0xc0)](Math[_0x8cf39d(0xb8)]()*_0x2b204a[_0x8cf39d(0xe8)])];}async function pureDelay(_0x284682){return new Promise(_0x4d3de0=>setTimeout(_0x4d3de0,_0x284682));}export class ChatService{constructor(_0x2aea3d,_0x44a1a7,_0xb6333f){const _0x3d212c=_0x2cb809;this[_0x3d212c(0x8e)]=_0x2aea3d,this[_0x3d212c(0xe1)]=_0x44a1a7,this['groqService']=_0xb6333f,this[_0x3d212c(0xe4)]=new Map(),this[_0x3d212c(0xa7)]=null,this[_0x3d212c(0x88)]=[];try{this[_0x3d212c(0xa7)]=new ethers[(_0x3d212c(0xab))](NETWORKS[_0x3d212c(0xf6)][_0x3d212c(0xa6)]);}catch(_0x53d771){this[_0x3d212c(0xe1)]?.['addDebugMessage']('[ERROR]\x20ChatService\x20(Sherlock):\x20Failed\x20to\x20init\x20ETH\x20provider.\x20'+_0x53d771[_0x3d212c(0xc1)]);}}async[_0x2cb809(0x9c)](){const _0x5b2342=_0x2cb809;if(!this[_0x5b2342(0xa7)]){this[_0x5b2342(0xe1)]?.[_0x5b2342(0xdb)]('[ERROR]\x20ChatService\x20(Sherlock):\x20Ethereum\x20provider\x20not\x20initialized.'),this[_0x5b2342(0x88)]=[];return;}this[_0x5b2342(0xe1)]?.[_0x5b2342(0xdb)](_0x5b2342(0x104)+NETWORKS[_0x5b2342(0xf6)][_0x5b2342(0xc4)]+_0x5b2342(0x10e));try{const _0x11f665=await this[_0x5b2342(0xa7)]['getBlockNumber'](),_0x358a5e=await this[_0x5b2342(0xa7)][_0x5b2342(0xf1)](_0x11f665,!![]);_0x358a5e&&_0x358a5e['transactions']&&_0x358a5e[_0x5b2342(0xd6)][_0x5b2342(0xe8)]>0x0?(this[_0x5b2342(0x88)]=(_0x358a5e[_0x5b2342(0xfe)]||[])[_0x5b2342(0x101)](_0x17d4b3=>_0x17d4b3[_0x5b2342(0x8d)]),this[_0x5b2342(0xe1)]?.[_0x5b2342(0xdb)](_0x5b2342(0xd2)+this[_0x5b2342(0x88)]['length']+_0x5b2342(0x91)+_0x11f665+'.')):(this[_0x5b2342(0xe1)]?.[_0x5b2342(0xdb)]('[INFO]\x20ChatService\x20(Sherlock):\x20No\x20TXs\x20in\x20latest\x20block\x20'+_0x11f665+'.'),this[_0x5b2342(0x88)]=[]);}catch(_0x26c674){this[_0x5b2342(0xe1)]?.[_0x5b2342(0xdb)]('[ERROR]\x20ChatService\x20(Sherlock):\x20Error\x20fetching\x20TX\x20hashes:\x20'+_0x26c674['message']),this[_0x5b2342(0x88)]=[];}}async['getRandomTransactionHashForSherlock'](){const _0x25bef7=_0x2cb809;if(this[_0x25bef7(0x88)][_0x25bef7(0xe8)]===0x0)return this[_0x25bef7(0xe1)]?.[_0x25bef7(0xdb)](_0x25bef7(0xf3)),null;return randomFromArray(this[_0x25bef7(0x88)]);}async[_0x2cb809(0xbb)](_0x317642,_0x262932){const _0x2cd8a0=_0x2cb809,_0xc4865c=[0xea60,0x15f90,0x1d4c0];for(let _0x573b60=0x0;_0x573b60<_0xc4865c[_0x2cd8a0(0xe8)];_0x573b60++){try{_0x262932['updateStatus']('Fetching\x20Agents..');const _0x536675=await this[_0x2cd8a0(0x8e)][_0x2cd8a0(0xd1)](API_ENDPOINTS[_0x2cd8a0(0xe2)],_0x2cd8a0(0xaa),'Bearer\x20'+_0x317642,{},{},_0xc4865c[_0x573b60],_0x262932[_0x2cd8a0(0xa3)]);this[_0x2cd8a0(0xe4)][_0x2cd8a0(0xbf)]();if(_0x536675['error']||!_0x536675['data']?.[_0x2cd8a0(0xcb)])throw new Error(_0x2cd8a0(0xea)+(_0x536675[_0x2cd8a0(0xc1)]||JSON[_0x2cd8a0(0x9b)](_0x536675['data'])));const _0x44ac7d=Config[_0x2cd8a0(0xb1)][_0x2cd8a0(0xd0)](_0x3edfdf=>_0x3edfdf[_0x2cd8a0(0xae)][_0x2cd8a0(0x101)](_0x2f3c2d=>({'subnet':_0x3edfdf[_0x2cd8a0(0xad)],'name':_0x2f3c2d})));for(const _0x1733bd of _0x536675['data']['data']){const _0x2da775=_0x1733bd?.[_0x2cd8a0(0x10f)];if(Array[_0x2cd8a0(0xd4)](_0x1733bd[_0x2cd8a0(0xc5)]))for(const _0x45dada of _0x1733bd[_0x2cd8a0(0xc5)]){if(_0x45dada?.['status']==='On'&&Array['isArray'](_0x45dada[_0x2cd8a0(0x86)])&&_0x45dada[_0x2cd8a0(0x86)][_0x2cd8a0(0xe8)]>0x0){const _0x3d1474=_0x45dada[_0x2cd8a0(0x86)][0x0];if(_0x3d1474?.[_0x2cd8a0(0x90)]===_0x2cd8a0(0x99)&&_0x3d1474['id']&&_0x45dada['displayed_name']){const _0x10d70e=_0x45dada['displayed_name'],_0x49e9cb=_0x44ac7d[_0x2cd8a0(0xc8)](_0x5e3d43=>_0x5e3d43[_0x2cd8a0(0x10c)][_0x2cd8a0(0xb6)]()===_0x10d70e[_0x2cd8a0(0xb6)]()&&_0x5e3d43[_0x2cd8a0(0xad)][_0x2cd8a0(0xb6)]()===_0x2da775[_0x2cd8a0(0xb6)]());_0x49e9cb&&!this[_0x2cd8a0(0xe4)][_0x2cd8a0(0xb5)](_0x10d70e)&&(this[_0x2cd8a0(0xe4)]['set'](_0x10d70e,{'id':_0x3d1474['id'],'subnet':_0x1733bd[_0x2cd8a0(0x10c)]}),this[_0x2cd8a0(0xe1)]['addDebugMessage'](_0x2cd8a0(0xe0)+_0x10d70e+_0x2cd8a0(0x9d)+_0x2da775+'\x27.'));}}}}this[_0x2cd8a0(0xe1)][_0x2cd8a0(0xdb)](_0x2cd8a0(0xe3)+this[_0x2cd8a0(0xe4)][_0x2cd8a0(0xac)]+_0x2cd8a0(0xff)),_0x262932[_0x2cd8a0(0x7f)](_0x2cd8a0(0x84));return;}catch(_0xcb5bf5){this[_0x2cd8a0(0xe1)][_0x2cd8a0(0xdb)](_0x2cd8a0(0xc9)+(_0x573b60+0x1)+_0x2cd8a0(0xce)+_0xcb5bf5[_0x2cd8a0(0xc1)]);if(_0x573b60<_0xc4865c[_0x2cd8a0(0xe8)]-0x1)await pureDelay(0x1388);else{this[_0x2cd8a0(0xe1)][_0x2cd8a0(0xdb)]('[ERROR]\x20GetAvailableAgents\x20failed\x20after\x20all\x20retries.'),_0x262932[_0x2cd8a0(0x7f)]('Error\x20Getting\x20Agents');throw _0xcb5bf5;}}}}async[_0x2cb809(0xa0)](_0x996dae,_0x35572f,_0x4e48a6,_0x2c5470,_0x106e28,_0x43bb4e,_0x2e7a82=0x0){const _0x4f7a18=_0x2cb809,_0xd5e8b7=GENERAL_MAX_ATTEMPTS,_0x5c42fb=_0x4e48a6||_0x996dae[_0x4f7a18(0xde)](0x0,0xa)+'...';_0x2e7a82===0x0&&this[_0x4f7a18(0xe1)][_0x4f7a18(0xdb)](_0x4f7a18(0xa8)+_0x5c42fb+':\x20\x22'+this['dashboard']['_truncateText'](_0x2c5470,0x14)+_0x4f7a18(0x7c));try{if(_0x35572f===_0x4f7a18(0x81)){const _0x278ebb=_0x21c6be(),_0x3e6ddd={'service_id':_0x996dae,'subnet':_0x35572f,'stream':![],'body':{'roomId':_0x4e48a6+_0x4f7a18(0x105),'userId':_0x43bb4e[_0x4f7a18(0x9a)],'username':_0x43bb4e['user']?.[_0x4f7a18(0x9f)]?.[_0x4f7a18(0xf4)]||_0x43bb4e[_0x4f7a18(0x9a)],'message':_0x2c5470,'timeDiff':0x0,'date':_0x278ebb['format'](_0x4f7a18(0x10a))}},_0xcf43d0=await this[_0x4f7a18(0x8e)]['fetch'](API_ENDPOINTS[_0x4f7a18(0x82)],_0x4f7a18(0x77),_0x4f7a18(0x108)+_0x106e28,_0x3e6ddd,{'Referer':_0x4f7a18(0xa5)},CHAT_TIMEOUT_MS,_0x43bb4e[_0x4f7a18(0xa3)]);if(_0xcf43d0[_0x4f7a18(0x102)]||_0xcf43d0[_0x4f7a18(0xcb)]&&typeof _0xcf43d0[_0x4f7a18(0xcb)][_0x4f7a18(0xfa)]!==_0x4f7a18(0x7e)){if(_0xcf43d0[_0x4f7a18(0x90)]===0x191||_0xcf43d0['status']===0x1f8){this['dashboard']['addDebugMessage']('[WARN]\x20Agent\x20'+_0x5c42fb+_0x4f7a18(0x89)+_0xcf43d0['status']+_0x4f7a18(0xca));throw new Error(AGENT_UNAVAILABLE_SKIP_ERROR_PREFIX+'\x20'+_0x5c42fb+_0x4f7a18(0xf8));}throw new Error('Chat\x20with\x20'+_0x5c42fb+_0x4f7a18(0xd3)+_0xcf43d0['status']+':\x20'+(_0xcf43d0['message']||_0x4f7a18(0x95)));}const _0x2b6aba=_0xcf43d0['data'][_0x4f7a18(0xfa)];return this['dashboard'][_0x4f7a18(0xdb)](_0x4f7a18(0xd9)+_0x5c42fb+_0x4f7a18(0xbe)),_0x2b6aba[_0x4f7a18(0xee)]();}const _0x45324f={'headers':{'Accept':'text/event-stream','Content-Type':_0x4f7a18(0xfc),'Authorization':_0x4f7a18(0x108)+_0x106e28,'User-Agent':_0x43bb4e[_0x4f7a18(0xa3)]},'responseType':'stream','timeout':CHAT_TIMEOUT_MS},_0x5a6176={'service_id':_0x996dae,'subnet':_0x35572f,'stream':!![],'body':{'stream':!![],'message':_0x2c5470}},_0xe0eac9=await _0x2c6aef[_0x4f7a18(0xb4)](API_ENDPOINTS['AGENT_INFERENCE'],_0x5a6176,_0x45324f);let _0x34dbbe='',_0x53c295='',_0x3568e5=![],_0x45b145=![];_0x43bb4e['updateStatus'](_0x4f7a18(0xc7)+_0x5c42fb+_0x4f7a18(0xa9)),await new Promise((_0x9d25cb,_0x1bb2e3)=>{const _0x3841b3=_0x4f7a18;_0xe0eac9[_0x3841b3(0xcb)]['on']('data',_0x126534=>{const _0x27f0d1=_0x3841b3,_0x2ad56=_0x126534[_0x27f0d1(0xcf)](_0x27f0d1(0x83));_0x53c295+=_0x2ad56;if(_0x2ad56[_0x27f0d1(0xc3)](AGENT_OVERLOAD_MESSAGE))_0x3568e5=!![];const _0x3e4d78=_0x53c295[_0x27f0d1(0xc2)](/\r?\n\r?\n/);_0x53c295=_0x3e4d78[_0x27f0d1(0xe5)]()||'';for(const _0x304d4f of _0x3e4d78){if(!_0x304d4f['startsWith'](_0x27f0d1(0xbc)))continue;const _0x1d08c9=_0x304d4f['replace'](/^data:\s*/,'')['trim']();if(_0x1d08c9===_0x27f0d1(0xda))continue;try{const _0x1a1453=JSON[_0x27f0d1(0x8c)](_0x1d08c9);if(_0x1a1453[_0x27f0d1(0x7d)]?.[0x0]?.[_0x27f0d1(0xf2)]?.[_0x27f0d1(0xa4)])_0x34dbbe+=_0x1a1453[_0x27f0d1(0x7d)][0x0][_0x27f0d1(0xf2)][_0x27f0d1(0xa4)];}catch(_0x1ecc4c){}}}),_0xe0eac9[_0x3841b3(0xcb)]['on'](_0x3841b3(0xba),()=>{const _0xa06d07=_0x3841b3;_0x45b145=!![],_0x3568e5&&_0x34dbbe['trim']()===''?_0x1bb2e3(new Error(_0xa06d07(0x110))):_0x9d25cb();}),_0xe0eac9[_0x3841b3(0xcb)]['on']('error',_0x1bb576=>_0x1bb2e3(_0x1bb576));});if(_0x45b145&&_0x34dbbe[_0x4f7a18(0xee)]()===AGENT_OVERLOAD_MESSAGE)throw new Error('INTERNAL_OVERLOAD_AS_RESPONSE_CONTENT');return _0x2e7a82===0x0&&!_0x3568e5&&this[_0x4f7a18(0xe1)]['addDebugMessage']('[SUCCESS]\x20Chat\x20with\x20'+_0x5c42fb+'\x20successful.'),await pureDelay(0x1f4),_0x34dbbe[_0x4f7a18(0xee)]()||_0x4f7a18(0x92);}catch(_0x217edd){const _0x486045=_0x217edd[_0x4f7a18(0x103)]?.[_0x4f7a18(0x90)];let _0x3cd3d7=_0x217edd[_0x4f7a18(0xc1)]||_0x4f7a18(0x7b);if(_0x217edd['message'][_0x4f7a18(0xb0)](AGENT_UNAVAILABLE_SKIP_ERROR_PREFIX)||_0x217edd[_0x4f7a18(0xc1)]===_0x4f7a18(0x110)||_0x217edd[_0x4f7a18(0xc1)]===_0x4f7a18(0xd7)||_0x486045===0x1f8||_0x486045===0x1a6||_0x486045===0x1ba){this[_0x4f7a18(0xe1)][_0x4f7a18(0xdb)](_0x4f7a18(0x93)+_0x5c42fb+_0x4f7a18(0xb9));throw new Error(AGENT_UNAVAILABLE_SKIP_ERROR_PREFIX+'\x20'+_0x5c42fb+_0x4f7a18(0xf8));}this[_0x4f7a18(0xe1)][_0x4f7a18(0xdb)](_0x4f7a18(0xa2)+_0x5c42fb+_0x4f7a18(0x7a)+(_0x2e7a82+0x1)+'/'+_0xd5e8b7+_0x4f7a18(0xb3)+this['dashboard'][_0x4f7a18(0xa1)](_0x3cd3d7,0x46));if(_0x2e7a82<_0xd5e8b7-0x1)return await pureDelay(0x2710*(_0x2e7a82+0x1)),this['_adaptedChatWithAI'](_0x996dae,_0x35572f,_0x4e48a6,_0x2c5470,_0x106e28,_0x43bb4e,_0x2e7a82+0x1);throw new Error(AGENT_UNAVAILABLE_SKIP_ERROR_PREFIX+'\x20'+_0x5c42fb+':MaxRetriesGeneral');}}async[_0x2cb809(0x106)](_0xb2d7e0,_0x2032f0,_0x1635e3){const _0x165104=_0x2cb809;if(Config[_0x165104(0xb1)][_0x165104(0xe8)]===0x0){this['dashboard']['addDebugMessage'](_0x165104(0x107)),_0x1635e3[_0x165104(0x7f)](_0x165104(0x9e));return;}let _0x301901=Config[_0x165104(0xb1)][_0x165104(0xd0)](_0x139042=>_0x139042['names'][_0x165104(0x101)](_0xdd78f6=>({'subnet':_0x139042[_0x165104(0xad)],'name':_0xdd78f6})))[_0x165104(0xf9)](_0x571231=>this[_0x165104(0xe4)][_0x165104(0xb5)](_0x571231[_0x165104(0x10c)]))[_0x165104(0x101)](_0x4ca0ce=>{const _0x53a479=_0x165104,_0xca7847=this[_0x53a479(0xe4)][_0x53a479(0xe7)](_0x4ca0ce[_0x53a479(0x10c)]);return{'name':_0x4ca0ce['name'],'service_id':_0xca7847['id'],'subnet':_0xca7847['subnet']};});if(_0x301901[_0x165104(0xe8)]===0x0){this[_0x165104(0xe1)][_0x165104(0xdb)](_0x165104(0x10b)),_0x1635e3[_0x165104(0x7f)](_0x165104(0xfb));return;}_0x301901=shuffleArray([..._0x301901]);let _0x5b160b=!![];for(const _0x15d851 of _0x301901){!_0x5b160b&&(this[_0x165104(0xe1)][_0x165104(0xdb)]('[INFO]\x20Delaying\x20'+DELAY_BETWEEN_AGENT_SESSIONS_SEC+_0x165104(0xb7)),await pureDelay(DELAY_BETWEEN_AGENT_SESSIONS_SEC*0x3e8));_0x5b160b=![];const _0x12d6cf=_0x15d851['name'],_0x223133=_0x15d851[_0x165104(0x80)],_0x32e7d4=_0x15d851['subnet'],_0x55bf39=Config[_0x165104(0xcc)]||MIN_CHATS_PER_AGENT_SESSION,_0x4e4671=Config[_0x165104(0xe6)]||MAX_CHATS_PER_AGENT_SESSION,_0x36d683=random(_0x55bf39,_0x4e4671);this[_0x165104(0xe1)][_0x165104(0xdb)](_0x165104(0x76)+_0x36d683+_0x165104(0xdd)+_0x12d6cf+'.');_0x12d6cf===SHERLOCK_AGENT_NAME&&await this['fetchLatestTransactionHashesForSherlock']();for(let _0x521f67=0x0;_0x521f67<_0x36d683;_0x521f67++){_0x1635e3['updateStatus'](_0x165104(0x10d)+(_0x521f67+0x1)+'/'+_0x36d683+'\x20with\x20'+_0x12d6cf);let _0x29c87a;if(_0x32e7d4==='aiveronica')_0x29c87a=await this[_0x165104(0xdf)][_0x165104(0x8f)]();else{if(_0x12d6cf===SHERLOCK_AGENT_NAME){_0x29c87a=await this[_0x165104(0xdc)]();if(!_0x29c87a)_0x29c87a=_0x165104(0xb2);else _0x29c87a=''+_0x29c87a;}else{_0x29c87a=await this[_0x165104(0xdf)][_0x165104(0x111)]();if(!_0x29c87a)_0x29c87a=randomFromArray(FALLBACK_QUESTIONS)||_0x165104(0x8b);}}try{const _0x46f0cc=await this[_0x165104(0xa0)](_0x223133,_0x32e7d4,_0x12d6cf,_0x29c87a,_0xb2d7e0,_0x1635e3);this[_0x165104(0xe1)]['addChatLog'](_0x29c87a,_0x46f0cc);const _0x18bab6={'address':_0x2032f0?.[_0x165104(0x9f)]?.['smart_account_address']||_0x1635e3['eoaAddress'],'service_id':_0x223133,'input':[{'type':_0x165104(0x97),'value':_0x29c87a}],'output':[{'type':'text/plain','value':_0x46f0cc}]};await this['api'][_0x165104(0xd1)](API_ENDPOINTS[_0x165104(0xc6)],'POST',_0x165104(0x108)+_0xb2d7e0,_0x18bab6,{},undefined,_0x1635e3[_0x165104(0xa3)]);}catch(_0x313455){if(_0x313455['message']['startsWith'](AGENT_UNAVAILABLE_SKIP_ERROR_PREFIX)){this['dashboard'][_0x165104(0xdb)](_0x165104(0x109)+_0x12d6cf+'\x20signaled\x20skip.\x20Moving\x20to\x20next\x20agent.'),_0x1635e3[_0x165104(0x7f)]('Skipping\x20Chat\x20w/\x20'+_0x12d6cf+'..');break;}this['dashboard'][_0x165104(0xdb)](_0x165104(0xf0)+(_0x521f67+0x1)+_0x165104(0xbd)+_0x12d6cf+':\x20'+_0x313455[_0x165104(0xc1)]),this[_0x165104(0xe1)][_0x165104(0xe9)](_0x29c87a,_0x165104(0xeb)+_0x313455['message']),await pureDelay(0x7d0);}if(_0x521f67<_0x36d683-0x1){const _0xbb6a76=random(DELAY_BETWEEN_CHAT_INTERACTIONS_MIN_SEC,DELAY_BETWEEN_CHAT_INTERACTIONS_MAX_SEC);_0x1635e3[_0x165104(0x7f)](_0x165104(0x94)),await pureDelay(_0xbb6a76*0x3e8);}}this['dashboard'][_0x165104(0xdb)](_0x165104(0xec)+_0x12d6cf+'.');}_0x1635e3[_0x165104(0x7f)](_0x165104(0xf5));}}