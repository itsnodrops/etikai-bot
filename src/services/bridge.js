const _0x421e53=_0x21c6;(function(_0x2b5f26,_0x3e32f8){const _0x14d093=_0x21c6,_0x31c48f=_0x2b5f26();while(!![]){try{const _0x3120af=-parseInt(_0x14d093(0x151))/0x1*(-parseInt(_0x14d093(0x15b))/0x2)+-parseInt(_0x14d093(0x169))/0x3*(-parseInt(_0x14d093(0x167))/0x4)+parseInt(_0x14d093(0x15c))/0x5+parseInt(_0x14d093(0x14f))/0x6*(parseInt(_0x14d093(0x15a))/0x7)+parseInt(_0x14d093(0x168))/0x8+-parseInt(_0x14d093(0x172))/0x9+-parseInt(_0x14d093(0x153))/0xa*(parseInt(_0x14d093(0x150))/0xb);if(_0x3120af===_0x3e32f8)break;else _0x31c48f['push'](_0x31c48f['shift']());}catch(_0x3bb382){_0x31c48f['push'](_0x31c48f['shift']());}}}(_0x5b8a,0x888f0));function _0x5b8a(){const _0x5decf4=['maxPriorityFeePerGas','maxFeePerGas','formatEther','truncateAddress','BRIDGE_ROUTER','5406331gOsqwK','2sJMMUh','2719110QmfsQb','getBalance','executeBridgeCycle','RPC_URL','[ERROR]\x20Insufficient\x20KITE\x20for\x20bridge.\x20Have:\x20','send','hash','Bridge\x20Failed\x20(Max\x20Retries)','getFeeData','refreshEoaBalance','.\x20Skipping.','1208mXTXsh','7996160kJWsEI','5262wDrhNb','[ERROR]\x20Bridge\x20operation\x20failed\x20after\x203\x20attempts.','/3\x20failed:\x20','address','[SUCCESS]\x20Bridge\x20from\x20Kite\x20to\x20Base\x20successful.\x20Tx:\x20','Contract','kiteProvider','JsonRpcProvider','[WARN]\x20Bridge\x20pre-check\x20failed.\x20Not\x20retrying.','2922030lgOSKA','updateStatus','[INFO]\x20Sending\x20bridge\x20transaction\x20from\x20Kite\x20to\x20Base...','_bridgeKiteFromKiteToBase','toString','Bridge\x20Complete..',',\x20Need:\x20','Processing\x20Bridge..','addDebugMessage','dashboard','parseEther','CHAIN_ID','[INFO]\x20Bridging\x20','toFixed','[ERROR]\x20Bridge\x20attempt\x20','Wallet','6YoYfgh','12438283xQGCKK','300137FDRDCu','message','20CIdcqo','BASE_SEPOLIA'];_0x5b8a=function(){return _0x5decf4;};return _0x5b8a();}import{ethers as _0x5868c8}from'ethers';import{NETWORKS as _0x584137,CONTRACTS as _0x4d30f8,ABIS as _0x1de21d}from'../core/network.js';async function pureDelay(_0x5934d3){return new Promise(_0x217ebc=>setTimeout(_0x217ebc,_0x5934d3));}function _0x21c6(_0x46a889,_0x30139b){const _0x5b8adf=_0x5b8a();return _0x21c6=function(_0x21c689,_0x4e0d90){_0x21c689=_0x21c689-0x146;let _0x1cac5f=_0x5b8adf[_0x21c689];return _0x1cac5f;},_0x21c6(_0x46a889,_0x30139b);}function getRandomFloat(_0x210d64,_0x121a58,_0xdf094f){const _0x570b7c=_0x21c6;let _0x2037a9=(Math['random']()*(_0x121a58-_0x210d64)+_0x210d64)[_0x570b7c(0x14c)](_0xdf094f);return parseFloat(_0x2037a9);}export class BridgeService{constructor(_0x59c535){const _0x4ba403=_0x21c6;this[_0x4ba403(0x148)]=_0x59c535,this[_0x4ba403(0x16f)]=new _0x5868c8[(_0x4ba403(0x170))](_0x584137['KITE_AI'][_0x4ba403(0x15f)]);}async[_0x421e53(0x175)](_0x344b00,_0x5d441b){const _0x3cd22b=_0x421e53;let _0x90bca8=new _0x5868c8[(_0x3cd22b(0x14e))](_0x344b00,this[_0x3cd22b(0x16f)]),_0x48e047=_0x5868c8[_0x3cd22b(0x149)](_0x5d441b[_0x3cd22b(0x176)]()),_0x2f4718=await this['kiteProvider'][_0x3cd22b(0x15d)](_0x90bca8[_0x3cd22b(0x16c)]);if(_0x2f4718<_0x48e047)return this[_0x3cd22b(0x148)][_0x3cd22b(0x147)](_0x3cd22b(0x160)+_0x5868c8[_0x3cd22b(0x157)](_0x2f4718)+_0x3cd22b(0x178)+_0x5d441b+_0x3cd22b(0x166)),null;let _0xf9a541=new _0x5868c8[(_0x3cd22b(0x16e))](_0x4d30f8['KITE_ROUTER_NATIVE'],_0x1de21d[_0x3cd22b(0x159)],_0x90bca8),_0x3173c1=await this['kiteProvider'][_0x3cd22b(0x164)](),_0x2c7941={'value':_0x48e047,'maxPriorityFeePerGas':_0x3173c1[_0x3cd22b(0x155)],'maxFeePerGas':fee[_0x3cd22b(0x156)]},_0x5fb225=await _0xf9a541['send']['estimateGas'](_0x584137[_0x3cd22b(0x154)][_0x3cd22b(0x14a)],_0x90bca8['address'],_0x48e047,_0x2c7941),_0xdcada6={..._0x2c7941,'gasLimit':0x78n*_0x5fb225/0x64n};this[_0x3cd22b(0x148)]['addDebugMessage'](_0x3cd22b(0x174));let _0x756090=await _0xf9a541[_0x3cd22b(0x161)](_0x584137['BASE_SEPOLIA'][_0x3cd22b(0x14a)],_0x90bca8['address'],_0x48e047,_0xdcada6);return await _0x756090['wait'](),_0x756090[_0x3cd22b(0x162)];}async[_0x421e53(0x15e)](_0xb518da,_0x15aea4){const _0x281b94=_0x421e53;this[_0x281b94(0x148)]['addDebugMessage']('[INFO]\x20Starting\x20one-time\x20KITE\x20bridge...'),_0x15aea4['updateStatus'](_0x281b94(0x146));for(let _0x35cfd1=0x1;_0x35cfd1<=0x3;_0x35cfd1++)try{await _0x15aea4[_0x281b94(0x165)]();let _0x2839dc=getRandomFloat(0.01,0.05,0x4);this['dashboard'][_0x281b94(0x147)](_0x281b94(0x14b)+_0x2839dc+'\x20KITE\x20from\x20Kite\x20to\x20Base\x20Sepolia.');let _0xd1b77c=await this[_0x281b94(0x175)](_0xb518da,_0x2839dc);if(_0xd1b77c)return this['dashboard'][_0x281b94(0x147)](_0x281b94(0x16d)+this[_0x281b94(0x148)][_0x281b94(0x158)](_0xd1b77c)),this[_0x281b94(0x148)][_0x281b94(0x147)]('[SUCCESS]\x20Bridge\x20operation\x20finished.'),await _0x15aea4[_0x281b94(0x173)](_0x281b94(0x177)),!0x0;this[_0x281b94(0x148)][_0x281b94(0x147)](_0x281b94(0x171));break;}catch(_0x25dc41){if(this[_0x281b94(0x148)]['addDebugMessage'](_0x281b94(0x14d)+_0x35cfd1+_0x281b94(0x16b)+_0x25dc41[_0x281b94(0x152)]),_0x35cfd1<0x3)_0x15aea4['updateStatus']('Bridge\x20Failed.\x20Retrying\x20in\x205s...'),await pureDelay(0x1388);else{this['dashboard']['addDebugMessage'](_0x281b94(0x16a)),_0x15aea4[_0x281b94(0x173)](_0x281b94(0x163));break;}}return!0x1;}}