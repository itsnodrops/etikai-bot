const _0x287e92=_0x2602;(function(_0x104b8a,_0xf0a942){const _0x2c0083=_0x2602,_0x49adcf=_0x104b8a();while(!![]){try{const _0x31ecba=-parseInt(_0x2c0083(0xe0))/0x1+-parseInt(_0x2c0083(0xdc))/0x2+-parseInt(_0x2c0083(0xcb))/0x3*(parseInt(_0x2c0083(0xd1))/0x4)+-parseInt(_0x2c0083(0xce))/0x5*(-parseInt(_0x2c0083(0xc1))/0x6)+-parseInt(_0x2c0083(0xcd))/0x7+parseInt(_0x2c0083(0xda))/0x8+-parseInt(_0x2c0083(0xba))/0x9*(-parseInt(_0x2c0083(0xbb))/0xa);if(_0x31ecba===_0xf0a942)break;else _0x49adcf['push'](_0x49adcf['shift']());}catch(_0x1b17a3){_0x49adcf['push'](_0x49adcf['shift']());}}}(_0x3857,0xd9ae9));import{ethers}from'ethers';function _0x3857(){const _0x51d5e5=['.\x20Skipping.','3139466jXMTrk','Wallet','toString','[INFO]\x20Bridging\x20','1567905kCPOyF','JsonRpcProvider','address','random','dashboard','send','s...','parseEther','maxFeePerGas','9PnpdVs','36917330bSRqVZ','Bridge\x20Failed.\x20Retrying\x20in\x20','hash','[SUCCESS]\x20Bridge\x20from\x20Kite\x20to\x20Base\x20successful.\x20Tx:\x20','CHAIN_ID','message','224424PRxITo','[SUCCESS]\x20Bridge\x20operation\x20finished.','[ERROR]\x20Bridge\x20attempt\x20','_bridgeKiteFromKiteToBase','estimateGas','BRIDGE_ROUTER','\x20failed:\x20','updateStatus','executeBridgeCycle','wait','50133XysNpl','toFixed','2409246XTsInJ','40GnQAZD','kiteProvider','[ERROR]\x20Bridge\x20operation\x20failed\x20after\x20','96LCPBRp','BASE_SEPOLIA','getFeeData','KITE_ROUTER_NATIVE','Bridge\x20Complete..','KITE_AI','Processing\x20Bridge..','addDebugMessage','Contract','6268320OIJEyB'];_0x3857=function(){return _0x51d5e5;};return _0x3857();}function _0x2602(_0x3ad3a4,_0x4fc015){const _0x38570b=_0x3857();return _0x2602=function(_0x2602bc,_0x37aa8e){_0x2602bc=_0x2602bc-0xb9;let _0x29b396=_0x38570b[_0x2602bc];return _0x29b396;},_0x2602(_0x3ad3a4,_0x4fc015);}import{NETWORKS,CONTRACTS,ABIS}from'../core/network.js';async function pureDelay(_0x104bf7){return new Promise(_0x1f8e83=>setTimeout(_0x1f8e83,_0x104bf7));}function getRandomFloat(_0x4b27a5,_0x39e8e9,_0x20a91c){const _0x1010a3=_0x2602,_0x5f17f5=(Math[_0x1010a3(0xe3)]()*(_0x39e8e9-_0x4b27a5)+_0x4b27a5)[_0x1010a3(0xcc)](_0x20a91c);return parseFloat(_0x5f17f5);}export class BridgeService{constructor(_0x1bf2c8){const _0x403922=_0x2602;this[_0x403922(0xe4)]=_0x1bf2c8,this['kiteProvider']=new ethers[(_0x403922(0xe1))](NETWORKS[_0x403922(0xd6)]['RPC_URL']);}async[_0x287e92(0xc4)](_0x24369d,_0x596bc2){const _0x52bbca=_0x287e92,_0xe0de4=new ethers[(_0x52bbca(0xdd))](_0x24369d,this[_0x52bbca(0xcf)]),_0x439ee0=ethers[_0x52bbca(0xe7)](_0x596bc2[_0x52bbca(0xde)]()),_0x4e038e=await this['kiteProvider']['getBalance'](_0xe0de4[_0x52bbca(0xe2)]);if(_0x4e038e<_0x439ee0)return this[_0x52bbca(0xe4)][_0x52bbca(0xd8)]('[ERROR]\x20Insufficient\x20KITE\x20for\x20bridge.\x20Have:\x20'+ethers['formatEther'](_0x4e038e)+',\x20Need:\x20'+_0x596bc2+_0x52bbca(0xdb)),null;const _0x5048f9=new ethers[(_0x52bbca(0xd9))](CONTRACTS[_0x52bbca(0xd4)],ABIS[_0x52bbca(0xc6)],_0xe0de4),_0x5d8d08=await this[_0x52bbca(0xcf)][_0x52bbca(0xd3)](),_0xc7057d={'value':_0x439ee0,'maxPriorityFeePerGas':_0x5d8d08['maxPriorityFeePerGas'],'maxFeePerGas':fee[_0x52bbca(0xb9)]},_0x320870=await _0x5048f9[_0x52bbca(0xe5)][_0x52bbca(0xc5)](NETWORKS[_0x52bbca(0xd2)][_0x52bbca(0xbf)],_0xe0de4[_0x52bbca(0xe2)],_0x439ee0,_0xc7057d),_0x5d6837={..._0xc7057d,'gasLimit':_0x320870*0x78n/0x64n};this[_0x52bbca(0xe4)][_0x52bbca(0xd8)]('[INFO]\x20Sending\x20bridge\x20transaction\x20from\x20Kite\x20to\x20Base...');const _0x3020e5=await _0x5048f9[_0x52bbca(0xe5)](NETWORKS['BASE_SEPOLIA'][_0x52bbca(0xbf)],_0xe0de4[_0x52bbca(0xe2)],_0x439ee0,_0x5d6837);return await _0x3020e5[_0x52bbca(0xca)](),_0x3020e5[_0x52bbca(0xbd)];}async[_0x287e92(0xc9)](_0x208b6d,_0xb636a2){const _0x2022e8=_0x287e92;this['dashboard'][_0x2022e8(0xd8)]('[INFO]\x20Starting\x20one-time\x20KITE\x20bridge...'),_0xb636a2[_0x2022e8(0xc8)](_0x2022e8(0xd7));const _0x283122=0x3,_0x2af580=0x1388;for(let _0x41594a=0x1;_0x41594a<=_0x283122;_0x41594a++){try{await _0xb636a2['refreshEoaBalance']();const _0x24b65d=getRandomFloat(0.01,0.05,0x4);this[_0x2022e8(0xe4)][_0x2022e8(0xd8)](_0x2022e8(0xdf)+_0x24b65d+'\x20KITE\x20from\x20Kite\x20to\x20Base\x20Sepolia.');const _0x24ad54=await this[_0x2022e8(0xc4)](_0x208b6d,_0x24b65d);return _0x24ad54?(this[_0x2022e8(0xe4)][_0x2022e8(0xd8)](_0x2022e8(0xbe)+this['dashboard']['truncateAddress'](_0x24ad54)),this[_0x2022e8(0xe4)]['addDebugMessage'](_0x2022e8(0xc2)),await _0xb636a2['updateStatus'](_0x2022e8(0xd5)),!![]):(this[_0x2022e8(0xe4)][_0x2022e8(0xd8)]('[WARN]\x20Bridge\x20pre-check\x20failed.\x20Not\x20retrying.'),![]);}catch(_0x6fa3d0){this['dashboard'][_0x2022e8(0xd8)](_0x2022e8(0xc3)+_0x41594a+'/'+_0x283122+_0x2022e8(0xc7)+_0x6fa3d0[_0x2022e8(0xc0)]);if(_0x41594a<_0x283122)_0xb636a2['updateStatus'](_0x2022e8(0xbc)+_0x2af580/0x3e8+_0x2022e8(0xe6)),await pureDelay(_0x2af580);else return this[_0x2022e8(0xe4)]['addDebugMessage'](_0x2022e8(0xd0)+_0x283122+'\x20attempts.'),_0xb636a2['updateStatus']('Bridge\x20Failed\x20(Max\x20Retries)'),![];}}return![];}}