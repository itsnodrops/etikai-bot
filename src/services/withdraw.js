const _0x14fa5d=_0x28a1;function _0x28a1(_0x1fea17,_0x18ea3e){const _0x1a586e=_0x1a58();return _0x28a1=function(_0x28a140,_0x5bc3cd){_0x28a140=_0x28a140-0xc4;let _0x451519=_0x1a586e[_0x28a140];return _0x451519;},_0x28a1(_0x1fea17,_0x18ea3e);}(function(_0x1f1ac9,_0x27a88b){const _0x10b4da=_0x28a1,_0x25d001=_0x1f1ac9();while(!![]){try{const _0x2c3f26=-parseInt(_0x10b4da(0xe4))/0x1*(-parseInt(_0x10b4da(0xea))/0x2)+-parseInt(_0x10b4da(0xe5))/0x3*(-parseInt(_0x10b4da(0xeb))/0x4)+-parseInt(_0x10b4da(0xda))/0x5*(parseInt(_0x10b4da(0xe8))/0x6)+parseInt(_0x10b4da(0xd2))/0x7+-parseInt(_0x10b4da(0xde))/0x8+-parseInt(_0x10b4da(0xdb))/0x9+parseInt(_0x10b4da(0xe6))/0xa*(parseInt(_0x10b4da(0xd7))/0xb);if(_0x2c3f26===_0x27a88b)break;else _0x25d001['push'](_0x25d001['shift']());}catch(_0xd674b7){_0x25d001['push'](_0x25d001['shift']());}}}(_0x1a58,0xcdb36));import{API_ENDPOINTS as _0x4ce8ab}from'../core/api.js';async function pureDelay(_0x488205){return new Promise(_0x8e2746=>setTimeout(_0x8e2746,_0x488205));}export class WithdrawService{constructor(_0x5a797d,_0x865b65){this['api']=_0x5a797d,this['dashboard']=_0x865b65;}async[_0x14fa5d(0xdc)](_0xc8a6bd,_0x1852e0,_0x348677){const _0x146a24=_0x14fa5d;this['dashboard'][_0x146a24(0xd6)](_0x146a24(0xf0)+_0x1852e0+'\x20KITE\x20to\x20EOA\x20for\x20gas...'),_0x348677[_0x146a24(0xd1)](_0x146a24(0xd0)+_0x1852e0+_0x146a24(0xd8));try{let _0x5c778a=_0x4ce8ab[_0x146a24(0xe2)](_0x348677['eoaAddress'],_0x1852e0,_0x146a24(0xee)),_0x2dce20=await this['api'][_0x146a24(0xf1)](_0x5c778a,_0x146a24(0xd5),_0x146a24(0xc6)+_0xc8a6bd,{},{'Referer':_0x146a24(0xe9)},0x1d4c0,_0x348677[_0x146a24(0xc4)]);if(_0x2dce20[_0x146a24(0xcc)])throw Error('API\x20Error\x20'+_0x2dce20[_0x146a24(0xe3)]+':\x20'+(_0x2dce20[_0x146a24(0xe7)]||JSON[_0x146a24(0xca)](_0x2dce20[_0x146a24(0xcd)])));this[_0x146a24(0xf2)][_0x146a24(0xd6)](_0x146a24(0xec)+_0x1852e0+_0x146a24(0xc5)),_0x348677[_0x146a24(0xd1)](_0x146a24(0xe1));}catch(_0x50de54){this[_0x146a24(0xf2)]['addDebugMessage'](_0x146a24(0xcf)+_0x50de54[_0x146a24(0xe7)]),_0x348677[_0x146a24(0xd1)](_0x146a24(0xc7));}}async['withdrawAllUsdt'](_0x45a1a6,_0x4bc442,_0x314d2b){const _0x2574dc=_0x14fa5d;if(this[_0x2574dc(0xf2)][_0x2574dc(0xd6)](_0x2574dc(0xed)),_0x314d2b[_0x2574dc(0xd1)](_0x2574dc(0xd4)),!_0x4bc442?.['profile']?.[_0x2574dc(0xce)]){this['dashboard'][_0x2574dc(0xd6)]('[WARN]\x20Smart\x20Account\x20address\x20not\x20found.\x20Skipping\x20withdrawal.');return;}try{let _0x26e79c=await this[_0x2574dc(0xcb)][_0x2574dc(0xf1)](_0x4ce8ab[_0x2574dc(0xdf)],_0x2574dc(0xd9),_0x2574dc(0xc6)+_0x45a1a6,{},{'Referer':_0x2574dc(0xe9)},0xea60,_0x314d2b[_0x2574dc(0xc4)]);if(_0x26e79c['error']||!_0x26e79c[_0x2574dc(0xcd)]?.[_0x2574dc(0xcd)]?.['balances'])throw Error('Could\x20not\x20fetch\x20SA\x20balances\x20for\x20withdrawal.');let _0x50d00d=_0x26e79c[_0x2574dc(0xcd)][_0x2574dc(0xcd)]['balances']['usdt']||0x0,_0x3e08ac=Math['floor'](parseFloat(_0x50d00d));if(_0x3e08ac<0x1){this[_0x2574dc(0xf2)][_0x2574dc(0xd6)]('[INFO]\x20No\x20withdrawable\x20USDT\x20balance\x20found.');return;}this[_0x2574dc(0xf2)]['addDebugMessage'](_0x2574dc(0xf0)+_0x3e08ac+_0x2574dc(0xdd)),_0x314d2b[_0x2574dc(0xd1)](_0x2574dc(0xd0)+_0x3e08ac+'\x20USDT');let _0x4901ea=_0x4ce8ab['WITHDRAW_TOKEN'](_0x314d2b[_0x2574dc(0xef)],_0x3e08ac,_0x2574dc(0xc9)),_0x3e8863=await this[_0x2574dc(0xcb)][_0x2574dc(0xf1)](_0x4901ea,'POST',_0x2574dc(0xc6)+_0x45a1a6,{},{'Referer':_0x2574dc(0xe9)},0x1d4c0,_0x314d2b[_0x2574dc(0xc4)]);if(_0x3e8863[_0x2574dc(0xcc)])throw Error(_0x2574dc(0xe0)+_0x3e8863['status']+':\x20'+(_0x3e8863[_0x2574dc(0xe7)]||JSON[_0x2574dc(0xca)](_0x3e8863['data'])));this[_0x2574dc(0xf2)][_0x2574dc(0xd6)]('[SUCCESS]\x20Successfully\x20initiated\x20withdrawal\x20of\x20'+_0x3e08ac+_0x2574dc(0xdd)),_0x314d2b[_0x2574dc(0xd1)](_0x2574dc(0xd3));}catch(_0x17d435){this['dashboard'][_0x2574dc(0xd6)](_0x2574dc(0xc8)+_0x17d435[_0x2574dc(0xe7)]),_0x314d2b[_0x2574dc(0xd1)]('Withdrawal\x20Failed');}}}function _0x1a58(){const _0x2d00ff=['smart_account_address','[ERROR]\x20$KITE\x20withdrawal\x20failed:\x20','Withdrawing\x20','updateStatus','10007893qNEBfa','Withdrawal\x20Successful','Checking\x20USDT\x20Withdrawal','POST','addDebugMessage','5262554KlJqVY','\x20KITE','GET','5mHauKX','3815172lCdrpK','withdrawNativeKite','\x20USDT.','12962384BvgsiG','SMART_ACCOUNT_BALANCE','API\x20Error\x20','$KITE\x20Withdrawal\x20Success','WITHDRAW_TOKEN','status','1ryRCXv','466275qkIwxQ','10xnoEJz','message','118986IVajZx','https://testnet.gokite.ai/','1064398ERWuAn','12vRFhzP','[SUCCESS]\x20Successfully\x20initiated\x20withdrawal\x20of\x20','[INFO]\x20Checking\x20for\x20USDT\x20to\x20withdraw...','native','eoaAddress','[INFO]\x20Attempting\x20to\x20withdraw\x20','fetch','dashboard','userAgent','\x20KITE.','Bearer\x20','$KITE\x20Withdrawal\x20Failed','[ERROR]\x20USDT\x20withdrawal\x20failed:\x20','erc20','stringify','api','error','data'];_0x1a58=function(){return _0x2d00ff;};return _0x1a58();}