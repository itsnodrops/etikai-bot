const _0x1bb1ff=_0x2026;function _0x2026(_0x295d11,_0xae5bdd){const _0x4087e4=_0x4087();return _0x2026=function(_0x20269f,_0x24e1a6){_0x20269f=_0x20269f-0x17b;let _0x1109d1=_0x4087e4[_0x20269f];return _0x1109d1;},_0x2026(_0x295d11,_0xae5bdd);}(function(_0xe0a250,_0x10b299){const _0x59801c=_0x2026,_0x511d77=_0xe0a250();while(!![]){try{const _0x12fd10=parseInt(_0x59801c(0x18c))/0x1*(parseInt(_0x59801c(0x1d7))/0x2)+parseInt(_0x59801c(0x1cc))/0x3*(-parseInt(_0x59801c(0x193))/0x4)+parseInt(_0x59801c(0x186))/0x5*(-parseInt(_0x59801c(0x1d4))/0x6)+parseInt(_0x59801c(0x183))/0x7+-parseInt(_0x59801c(0x18f))/0x8*(parseInt(_0x59801c(0x1b1))/0x9)+-parseInt(_0x59801c(0x17b))/0xa+parseInt(_0x59801c(0x1ce))/0xb;if(_0x12fd10===_0x10b299)break;else _0x511d77['push'](_0x511d77['shift']());}catch(_0x4a3a78){_0x511d77['push'](_0x511d77['shift']());}}}(_0x4087,0x442c9));import{ethers}from'ethers';function _0x4087(){const _0x5f07d2=['[INFO]\x20Fetching\x20all\x20multi-sig\x20wallets...','eoaAddress','\x20KITE\x20to\x20','hash','[WARN]\x20Nonce\x20','[ERROR]\x20Could\x20not\x20get\x20multi-sig\x20wallets:\x20','updateStatus','wallet','refundReceiver','GNOSIS_SAFE_L2_ADDRESS','getBytes','number','1561260WFoHaz','[ERROR]\x20Withdrawal\x20from\x20','formatEther','bytes','userAgent','Multi-sig\x20creation\x20failed','\x20KITE...','All\x20nonce\x20probes\x20failed:\x20','2121721irphHQ','dashboard','createMultiSigOnChain','6505hwAAcA','FALLBACK_HANDLER_ADDRESS','..\x20failed:\x20','api','[INFO]\x20Withdrawal\x20transaction\x20sent:\x20','/nonces','7455eWxqJg','value','GET','18256bCIJeR','wait','getBalance','/safes/','8ATNkKz','execTransaction','[INFO]\x20Predicted\x20address:\x20','getTransactionHash','\x20is\x20likely\x20used.\x20Trying\x20next...','reason','MULTI_SIG','[ERROR]\x20Deposit\x20failed:\x20','Contract','maxFeePerGas','On-chain\x20execution\x20transaction\x20failed\x20(reverted).','data','withdrawFromMultiSig','error','[ERROR]\x20Multi-sig\x20creation\x20failed:\x20','0xb63e800d','Creating\x20multi-sig...','gasToken','Transaction\x20sent:\x20','defaultAbiCoder','message','address','operation','encode','gasPrice','[INFO]\x20Safe\x20nonce\x20is:\x20','\x20(Using\x20currentNonce)','Failed\x20to\x20fetch\x20safes\x20from\x20API:\x20','createProxyWithNonce','POST','864NXtwCJ','[INFO]\x20Proposing\x20transaction\x20via\x20API...','currentNonce','[WARN]\x20Insufficient\x20balance\x20for\x20deposit.\x20Have\x20','/transactions/','fetch','[INFO]\x20Depositing\x20','nonce','/propose','[SUCCESS]\x20Transaction\x20complete!\x20Hash:\x20','uint256','https://wallet.ash.center/','estimateGas','addDebugMessage','slice',',\x20need\x20','SAFE_PROXY_FACTORY','buildInitializerData','depositToMultiSig','maxPriorityFeePerGas','GNOSIS_SAFE','sendTransaction','SAFE_PROXY_FACTORY_ADDRESS','ZERO_ADDRESS','Deposit\x20failed','AbiCoder','[INFO]\x20Transaction\x20proposed\x20successfully.','656382wmuiWN','safeTxGas','12961014nTuzcQ','signMessage','/safes','safes','...','provider','1830nXgzLd','toString','replace','2UevEHF','baseGas'];_0x4087=function(){return _0x5f07d2;};return _0x4087();}import{CONTRACTS,ABIS}from'../core/network.js';import{API_ENDPOINTS}from'../core/api.js';const MULTI_SIG_API_HEADERS={'Referer':_0x1bb1ff(0x1bc)};export class MultiSigService{constructor(_0x327abc,_0x58cf4b){const _0x9f44e6=_0x1bb1ff;this[_0x9f44e6(0x189)]=_0x327abc,this[_0x9f44e6(0x184)]=_0x58cf4b;}[_0x1bb1ff(0x1c2)](_0x4ed6b9){const _0x35bf9b=_0x1bb1ff,_0x1fa4a8=_0x35bf9b(0x1a2),_0x158294=ethers[_0x35bf9b(0x1ca)][_0x35bf9b(0x1a6)]()[_0x35bf9b(0x1aa)](['address[]','uint256',_0x35bf9b(0x1a8),_0x35bf9b(0x17e),_0x35bf9b(0x1a8),_0x35bf9b(0x1a8),_0x35bf9b(0x1bb),_0x35bf9b(0x1a8)],[[_0x4ed6b9],0x1,CONTRACTS['ZERO_ADDRESS'],'0x',CONTRACTS[_0x35bf9b(0x187)],CONTRACTS[_0x35bf9b(0x1c8)],0x0,CONTRACTS[_0x35bf9b(0x1c8)]]);return _0x1fa4a8+_0x158294[_0x35bf9b(0x1bf)](0x2);}async[_0x1bb1ff(0x185)](_0x281315,_0x4ee3e4){const _0x18124e=_0x1bb1ff;_0x4ee3e4['updateStatus'](_0x18124e(0x1a3));try{const _0x4f7654=new ethers['Contract'](CONTRACTS[_0x18124e(0x1c7)],ABIS[_0x18124e(0x1c1)],_0x4ee3e4[_0x18124e(0x1e0)]),_0x141d25=this[_0x18124e(0x1c2)](_0x4ee3e4[_0x18124e(0x1da)]);let _0x50d396=_0x281315,_0x1afaaf=null;const _0x4ce54b=0x5;for(let _0x332d14=0x0;_0x332d14<_0x4ce54b;_0x332d14++){const _0x5bdb97=_0x281315+_0x332d14;this[_0x18124e(0x184)][_0x18124e(0x1be)]('[INFO]\x20Probing\x20with\x20saltNonce:\x20'+_0x5bdb97);try{_0x1afaaf=await _0x4f7654[_0x18124e(0x1af)]['staticCall'](CONTRACTS[_0x18124e(0x1e2)],_0x141d25,_0x5bdb97),_0x50d396=_0x5bdb97,this[_0x18124e(0x184)]['addDebugMessage'](_0x18124e(0x195)+_0x1afaaf);break;}catch(_0x3606b7){if(_0x332d14===_0x4ce54b-0x1)throw new Error(_0x18124e(0x182)+(_0x3606b7[_0x18124e(0x198)]||_0x3606b7[_0x18124e(0x1a7)]));this[_0x18124e(0x184)][_0x18124e(0x1be)](_0x18124e(0x1dd)+_0x5bdb97+_0x18124e(0x197));}}if(!_0x1afaaf)throw new Error('Could\x20not\x20predict\x20a\x20valid\x20address.');this[_0x18124e(0x184)][_0x18124e(0x1be)]('[INFO]\x20Sending\x20transaction..');const _0x159d56=await _0x4f7654[_0x18124e(0x1af)]['populateTransaction'](CONTRACTS['GNOSIS_SAFE_L2_ADDRESS'],_0x141d25,_0x50d396),_0xc71960=await _0x4ee3e4['wallet'][_0x18124e(0x1c6)](_0x159d56);return _0x4ee3e4[_0x18124e(0x1df)](_0x18124e(0x1a5)+_0xc71960[_0x18124e(0x1dc)][_0x18124e(0x1bf)](0x0,0xc)+'...'),await _0xc71960[_0x18124e(0x190)](),this['dashboard'][_0x18124e(0x1be)](_0x18124e(0x1ba)+_0xc71960[_0x18124e(0x1dc)]),_0x1afaaf;}catch(_0x270821){return this[_0x18124e(0x184)][_0x18124e(0x1be)](_0x18124e(0x1a1)+(_0x270821[_0x18124e(0x198)]||_0x270821[_0x18124e(0x1a7)])),_0x4ee3e4[_0x18124e(0x1df)](_0x18124e(0x180)),null;}}async[_0x1bb1ff(0x1c3)](_0xabe80d,_0x15ad6e,_0x48a7d7){const _0x2833f6=_0x1bb1ff;_0x48a7d7['updateStatus']('Depositing\x20'+_0x15ad6e+_0x2833f6(0x181)),this[_0x2833f6(0x184)][_0x2833f6(0x1be)](_0x2833f6(0x1b7)+_0x15ad6e+_0x2833f6(0x1db)+_0xabe80d[_0x2833f6(0x1bf)](0x0,0xa)+_0x2833f6(0x1d2));try{const _0x24ac74=ethers['parseEther'](_0x15ad6e[_0x2833f6(0x1d5)]()),_0x4a54da=await _0x48a7d7[_0x2833f6(0x1d3)][_0x2833f6(0x191)](_0x48a7d7[_0x2833f6(0x1da)]);if(_0x4a54da<_0x24ac74)return this[_0x2833f6(0x184)][_0x2833f6(0x1be)](_0x2833f6(0x1b4)+ethers[_0x2833f6(0x17d)](_0x4a54da)+_0x2833f6(0x1c0)+_0x15ad6e),![];const _0x51b86e=await _0x48a7d7[_0x2833f6(0x1d3)]['getFeeData'](),_0x588bdb=await _0x48a7d7['provider'][_0x2833f6(0x1bd)]({'to':_0xabe80d,'value':_0x24ac74}),_0x563e4a={'to':_0xabe80d,'value':_0x24ac74,'gasLimit':BigInt(_0x588bdb)*0x78n/0x64n,'maxFeePerGas':_0x51b86e[_0x2833f6(0x19c)],'maxPriorityFeePerGas':_0x51b86e[_0x2833f6(0x1c4)]},_0xa5970f=await _0x48a7d7[_0x2833f6(0x1e0)][_0x2833f6(0x1c6)](_0x563e4a);return _0x48a7d7[_0x2833f6(0x1df)](_0x2833f6(0x1a5)+_0xa5970f[_0x2833f6(0x1dc)][_0x2833f6(0x1bf)](0x0,0xc)+_0x2833f6(0x1d2)),await _0xa5970f[_0x2833f6(0x190)](),this[_0x2833f6(0x184)][_0x2833f6(0x1be)](_0x2833f6(0x1ba)+_0xa5970f['hash']),!![];}catch(_0x11ffb0){return this[_0x2833f6(0x184)][_0x2833f6(0x1be)](_0x2833f6(0x19a)+(_0x11ffb0[_0x2833f6(0x198)]||_0x11ffb0[_0x2833f6(0x1a7)])),_0x48a7d7['updateStatus'](_0x2833f6(0x1c9)),![];}}async['getAllMultiSigWallets'](_0x508708,_0x371ba1){const _0x464544=_0x1bb1ff,_0x139dde=API_ENDPOINTS['MULTI_SIG']+'/owners/'+_0x508708+_0x464544(0x1d0);this[_0x464544(0x184)]['addDebugMessage'](_0x464544(0x1d9));try{const _0x1a447c=await this['api'][_0x464544(0x1b6)](_0x139dde,_0x464544(0x18e),null,{},MULTI_SIG_API_HEADERS,0xea60,_0x371ba1[_0x464544(0x17f)]);if(_0x1a447c['error']||!_0x1a447c['data']||!_0x1a447c[_0x464544(0x19e)][_0x464544(0x1d1)])throw new Error(_0x464544(0x1ae)+_0x1a447c[_0x464544(0x1a7)]);return _0x1a447c[_0x464544(0x19e)][_0x464544(0x1d1)];}catch(_0x47484a){return this['dashboard'][_0x464544(0x1be)](_0x464544(0x1de)+_0x47484a[_0x464544(0x1a7)]),[];}}async[_0x1bb1ff(0x19f)](_0x4f531f,_0x4e231b,_0x4bac0c){const _0x3f3ca9=_0x1bb1ff;try{this[_0x3f3ca9(0x184)][_0x3f3ca9(0x1be)]('[INFO]\x20Getting\x20nonce\x20for\x20multi-sig\x20'+_0x4f531f[_0x3f3ca9(0x1bf)](0x0,0xa)+_0x3f3ca9(0x1d2));const _0x2c3df7=API_ENDPOINTS['MULTI_SIG']+_0x3f3ca9(0x192)+_0x4f531f+_0x3f3ca9(0x18b),_0x5a35c7=await this[_0x3f3ca9(0x189)][_0x3f3ca9(0x1b6)](_0x2c3df7,'GET',null,{},MULTI_SIG_API_HEADERS,0xea60,_0x4bac0c[_0x3f3ca9(0x17f)]);if(_0x5a35c7[_0x3f3ca9(0x1a0)]||!_0x5a35c7['data']||typeof _0x5a35c7[_0x3f3ca9(0x19e)][_0x3f3ca9(0x1b3)]!==_0x3f3ca9(0x1e4))throw new Error('Failed\x20to\x20get\x20nonce\x20from\x20API:\x20'+_0x5a35c7['message']);const _0x4e46da=_0x5a35c7['data'][_0x3f3ca9(0x1b3)];this[_0x3f3ca9(0x184)][_0x3f3ca9(0x1be)](_0x3f3ca9(0x1ac)+_0x4e46da+_0x3f3ca9(0x1ad));const _0x154b4b={'to':_0x4bac0c[_0x3f3ca9(0x1da)],'value':_0x4e231b,'data':'0x','operation':0x0,'safeTxGas':0x0n,'baseGas':0x0n,'gasPrice':0x0n,'gasToken':CONTRACTS[_0x3f3ca9(0x1c8)],'refundReceiver':CONTRACTS[_0x3f3ca9(0x1c8)],'nonce':BigInt(_0x4e46da)},_0x3d0fe8=new ethers['Contract'](_0x4f531f,ABIS[_0x3f3ca9(0x1c5)],_0x4bac0c['provider']),_0x5e1299=await _0x3d0fe8[_0x3f3ca9(0x196)](...Object['values'](_0x154b4b)),_0x4f1b97=await _0x4bac0c[_0x3f3ca9(0x1e0)][_0x3f3ca9(0x1cf)](ethers[_0x3f3ca9(0x1e3)](_0x5e1299)),_0xa15f7f=_0x4f1b97[_0x3f3ca9(0x1d6)](/1b$/,'1f')[_0x3f3ca9(0x1d6)](/1c$/,'20');this['dashboard'][_0x3f3ca9(0x1be)]('[INFO]\x20Hash\x20signed\x20successfully.');const _0x51847f={'to':_0x154b4b['to'],'value':_0x154b4b['value']['toString'](),'data':_0x154b4b['data'],'operation':_0x154b4b['operation'],'safeTxGas':_0x154b4b['safeTxGas'][_0x3f3ca9(0x1d5)](),'baseGas':_0x154b4b[_0x3f3ca9(0x1d8)][_0x3f3ca9(0x1d5)](),'gasPrice':_0x154b4b[_0x3f3ca9(0x1ab)][_0x3f3ca9(0x1d5)](),'gasToken':_0x154b4b[_0x3f3ca9(0x1a4)],'refundReceiver':_0x154b4b[_0x3f3ca9(0x1e1)],'nonce':_0x154b4b[_0x3f3ca9(0x1b8)][_0x3f3ca9(0x1d5)](),'safeTxHash':_0x5e1299,'sender':_0x4bac0c[_0x3f3ca9(0x1da)],'signature':_0xa15f7f},_0x931e6a=API_ENDPOINTS[_0x3f3ca9(0x199)]+_0x3f3ca9(0x1b5)+_0x4f531f+_0x3f3ca9(0x1b9);this[_0x3f3ca9(0x184)][_0x3f3ca9(0x1be)](_0x3f3ca9(0x1b2));const _0x4a0aa6=await this[_0x3f3ca9(0x189)]['fetch'](_0x931e6a,_0x3f3ca9(0x1b0),null,_0x51847f,MULTI_SIG_API_HEADERS,0xea60,_0x4bac0c[_0x3f3ca9(0x17f)]);if(_0x4a0aa6['error'])throw new Error('Failed\x20to\x20propose\x20transaction\x20to\x20API:\x20'+_0x4a0aa6[_0x3f3ca9(0x1a7)]);this[_0x3f3ca9(0x184)][_0x3f3ca9(0x1be)](_0x3f3ca9(0x1cb));const _0x104b51=new ethers[(_0x3f3ca9(0x19b))](_0x4f531f,ABIS[_0x3f3ca9(0x1c5)],_0x4bac0c['wallet']),_0x4ef933=await _0x104b51[_0x3f3ca9(0x194)](_0x154b4b['to'],_0x154b4b[_0x3f3ca9(0x18d)],_0x154b4b[_0x3f3ca9(0x19e)],_0x154b4b[_0x3f3ca9(0x1a9)],_0x154b4b[_0x3f3ca9(0x1cd)],_0x154b4b[_0x3f3ca9(0x1d8)],_0x154b4b[_0x3f3ca9(0x1ab)],_0x154b4b['gasToken'],_0x154b4b['refundReceiver'],_0xa15f7f);this[_0x3f3ca9(0x184)][_0x3f3ca9(0x1be)](_0x3f3ca9(0x18a)+_0x4ef933[_0x3f3ca9(0x1dc)]);const _0x22e676=await _0x4ef933['wait']();if(_0x22e676['status']===0x0)throw new Error(_0x3f3ca9(0x19d));return this[_0x3f3ca9(0x184)]['addDebugMessage']('[SUCCESS]\x20SUCCESS:\x20Withdrawal\x20confirmed\x20on-chain!'),!![];}catch(_0x32c06f){return this['dashboard'][_0x3f3ca9(0x1be)](_0x3f3ca9(0x17c)+_0x4f531f[_0x3f3ca9(0x1bf)](0x0,0xa)+_0x3f3ca9(0x188)+(_0x32c06f[_0x3f3ca9(0x198)]||_0x32c06f[_0x3f3ca9(0x1a7)])),![];}}}