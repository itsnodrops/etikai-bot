function _0x1d42(){const _0x279482=['error','iPhone\x20iOS\x2015+\x20Safari','sessionFilePath','_atomicWrite','toString','utf-8','_shuffle','addDebugMessage','url','macOS','migrateFromOldUAFile','Multi-sig\x20wallet\x20cache\x20loaded\x20successfully.','string','120','now','3219064wjiZmL','trim','safeWalletCache','log','\x22,\x20\x22Not.A/Brand\x22;v=\x2299\x22','\x22Not.A/Brand\x22;v=\x2299\x22','ensureEoaCache','sessionData','iphone','Session\x20data\x20loaded.','Android\x2013+\x20(any)','floor','_isValidAccountId','test','macintosh','toUpperCase','Android','info','Mobile\x20UA\x20detected\x20→\x20viewport\x20','length','_inferPlatform','stringify','CRITICAL\x20UA:\x20All\x20filtered\x20attempts\x20failed;\x20using\x20random\x20UA','regex','iOS','generateNewUserAgent','windows','_saveSession','Migration\x20failed:\x20','linux','\x22Firefox\x22;v=\x22','getLastClaimTimestamp','Failed\x20to\x20initialize\x20session\x20data:\x20','join','cros','1040870nMCfzD','_log','Chrome\x20on\x20macOS','accounts-ua.json','markBridgeAsCompleted','message','primeCacheWithWallets','safe-wallet.json','\x22Chromium\x22;v=\x22','Windows','match','3948DfnyVL','toLowerCase','isMobileUA','Linux','height','ENOENT','hasBridgeBeenCompleted','object','accounts','bridgeCompleted','38184jIoFDh','deviceScaleFactor','Failed\x20to\x20save\x20session\x20file:\x20',':\x20UA\x20empty,\x20using\x20desktop\x20viewport','Failed\x20to\x20save\x20multi-sig\x20cache\x20file:\x20','No\x20legacy\x20UA\x20file\x20at\x20','parse','\x20UA(s)\x20imported\x20from\x20','4385HBqvQu','409686cFvkzb','number','dashboard','buildClientHints','2320052IyVkLO','startsWith','rotateUserAgent','updateLastClaimTimestamp','.tmp','includes','warn','208257SDhvnS','getViewportForUA','ipad','_normalizeAccountId','Chrome\x20OS','_getAccount','session.json','code','dirname','_initialized','userAgent','N/A','readFile','isWalletKnownBelowThreshold','entries','width','\x22Safari\x22;v=\x22','Migration\x20complete:\x20','_saveSafeWalletCache','lastClaimTimestamp','random'];_0x1d42=function(){return _0x279482;};return _0x1d42();}const _0x35f194=_0x401a;(function(_0x516146,_0x64abe1){const _0xe79d6e=_0x401a,_0x5bd0cb=_0x516146();while(!![]){try{const _0x181f00=parseInt(_0xe79d6e(0x163))/0x1+parseInt(_0xe79d6e(0x14e))/0x2+parseInt(_0xe79d6e(0x16c))/0x3+parseInt(_0xe79d6e(0x170))/0x4+-parseInt(_0xe79d6e(0x16b))/0x5*(parseInt(_0xe79d6e(0x159))/0x6)+parseInt(_0xe79d6e(0x107))/0x7+-parseInt(_0xe79d6e(0x12b))/0x8;if(_0x181f00===_0x64abe1)break;else _0x5bd0cb['push'](_0x5bd0cb['shift']());}catch(_0x479f56){_0x5bd0cb['push'](_0x5bd0cb['shift']());}}}(_0x1d42,0x4f778));import _0x2fdd49 from'fs/promises';import _0x5b5710 from'path';function _0x401a(_0x320393,_0x565918){const _0x1d4239=_0x1d42();return _0x401a=function(_0x401a1e,_0xef68de){_0x401a1e=_0x401a1e-0x105;let _0x2b4b67=_0x1d4239[_0x401a1e];return _0x2b4b67;},_0x401a(_0x320393,_0x565918);}import{fileURLToPath}from'url';import _0x3acc8e from'user-agents';import{ethers}from'ethers';const __filename=fileURLToPath(import.meta[_0x35f194(0x124)]),__dirname=_0x5b5710[_0x35f194(0x10f)](__filename),DEFAULT_SESSION_FILE=_0x5b5710['join'](__dirname,_0x35f194(0x10d)),SAFE_WALLET_CACHE_FILE=_0x5b5710[_0x35f194(0x14c)](__dirname,_0x35f194(0x155));export default class SessionManager{constructor(_0x32400e,{sessionFilePath:sessionFilePath=DEFAULT_SESSION_FILE}={}){const _0x490094=_0x35f194;this['dashboard']=_0x32400e,this['sessionFilePath']=sessionFilePath,this['sessionData']={'accounts':{}},this[_0x490094(0x12d)]={},this[_0x490094(0x110)]=![];}[_0x35f194(0x14f)](_0x36821a,_0x2985c1){const _0x397404=_0x35f194,_0x30a6cb='['+_0x36821a[_0x397404(0x13a)]()+']\x20'+_0x2985c1;if(this['dashboard']?.['addDebugMessage'])this[_0x397404(0x16e)][_0x397404(0x123)](_0x30a6cb);else{if(_0x36821a===_0x397404(0x11c))console[_0x397404(0x11c)](_0x30a6cb);else console[_0x397404(0x12e)](_0x30a6cb);}}async['initialize'](){const _0x55d6f0=_0x35f194;if(this[_0x55d6f0(0x110)])return;try{let _0xc6b303='';try{_0xc6b303=await _0x2fdd49[_0x55d6f0(0x113)](this[_0x55d6f0(0x11e)],_0x55d6f0(0x121));}catch(_0x3dab8e){if(_0x3dab8e['code']!==_0x55d6f0(0x15e))throw _0x3dab8e;}const _0x300a69=_0xc6b303&&_0xc6b303[_0x55d6f0(0x12c)]()?JSON['parse'](_0xc6b303):{};this[_0x55d6f0(0x132)]={'accounts':{},..._0x300a69},(!this['sessionData'][_0x55d6f0(0x161)]||typeof this['sessionData']['accounts']!=='object')&&(this['sessionData'][_0x55d6f0(0x161)]={}),this['_log'](_0x55d6f0(0x13c),_0x55d6f0(0x134));}catch(_0x20f9f7){this[_0x55d6f0(0x14f)](_0x55d6f0(0x11c),_0x55d6f0(0x14b)+_0x20f9f7[_0x55d6f0(0x153)]),this[_0x55d6f0(0x132)]={'accounts':{}};}await this['_loadSafeWalletCache'](),this[_0x55d6f0(0x110)]=!![];}async['_saveSession'](){const _0x328148=_0x35f194;try{const _0x2608df=JSON[_0x328148(0x140)](this[_0x328148(0x132)],null,0x2);await this['_atomicWrite'](this[_0x328148(0x11e)],_0x2608df);}catch(_0x54a2ca){this[_0x328148(0x14f)]('error',_0x328148(0x165)+_0x54a2ca[_0x328148(0x153)]);}}[_0x35f194(0x10a)](_0x33260f){const _0x2421c4=_0x35f194;return typeof _0x33260f===_0x2421c4(0x128)?_0x33260f[_0x2421c4(0x12c)]():'';}['_isValidAccountId'](_0x2704e6){const _0x1f9793=_0x35f194,_0x3a87b9=this[_0x1f9793(0x10a)](_0x2704e6);return _0x3a87b9[_0x1f9793(0x171)]('0x')&&_0x3a87b9[_0x1f9793(0x13e)]>=0xa;}async[_0x35f194(0x11f)](_0x5b6943,_0x1b64d5){const _0x733e7d=_0x35f194,_0x5ccf9d=_0x5b6943+_0x733e7d(0x174);await _0x2fdd49['writeFile'](_0x5ccf9d,_0x1b64d5,_0x733e7d(0x121)),await _0x2fdd49['rename'](_0x5ccf9d,_0x5b6943);}['_getAccount'](_0x51a196){const _0x18267d=_0x35f194,_0x41e3e0=this['_normalizeAccountId'](_0x51a196);if(!this[_0x18267d(0x132)][_0x18267d(0x161)][_0x41e3e0])this[_0x18267d(0x132)][_0x18267d(0x161)][_0x41e3e0]={};return this['sessionData']['accounts'][_0x41e3e0];}static[_0x35f194(0x122)](_0x4fb177){const _0x4ec73a=_0x35f194;for(let _0x37bf26=_0x4fb177['length']-0x1;_0x37bf26>0x0;_0x37bf26--){const _0x35cd1b=Math[_0x4ec73a(0x136)](Math[_0x4ec73a(0x11b)]()*(_0x37bf26+0x1));[_0x4fb177[_0x37bf26],_0x4fb177[_0x35cd1b]]=[_0x4fb177[_0x35cd1b],_0x4fb177[_0x37bf26]];}return _0x4fb177;}[_0x35f194(0x144)](){const _0x1055c6=_0x35f194,_0x13754b=[{'name':'Android\x2013+\x20Chrome','regex':/Android (1[3-9]|[2-9]\d).* Chrome\//},{'name':_0x1055c6(0x11d),'regex':/iPhone OS (1[5-9]|[2-9]\d)_.* like Mac OS X/},{'name':_0x1055c6(0x150),'regex':/Macintosh;.*Chrome\/(?!Chromium)/},{'name':'Chrome\x20on\x20Windows','regex':/Windows NT .*Chrome\/(?!Chromium)/},{'name':_0x1055c6(0x135),'regex':/Android (1[3-9]|[2-9]\d)/}];SessionManager[_0x1055c6(0x122)](_0x13754b);for(const _0x2235c3 of _0x13754b){try{const _0x193511=new _0x3acc8e(_0x2235c3[_0x1055c6(0x142)])['toString']();if(_0x193511&&typeof _0x193511==='string')return _0x193511;}catch(_0x4bf83e){}}return this[_0x1055c6(0x14f)](_0x1055c6(0x11c),_0x1055c6(0x141)),new _0x3acc8e()[_0x1055c6(0x120)]();}async['getUserAgentForAccount'](_0x14d5e5){const _0x4130b0=_0x35f194;if(!this[_0x4130b0(0x137)](_0x14d5e5))return this['_log'](_0x4130b0(0x11c),'Invalid\x20accountId\x20for\x20UA:\x20'+_0x14d5e5),this[_0x4130b0(0x144)]();const _0x27d4ff=this['_getAccount'](_0x14d5e5);return!_0x27d4ff[_0x4130b0(0x111)]&&(_0x27d4ff[_0x4130b0(0x111)]=this[_0x4130b0(0x144)](),await this[_0x4130b0(0x146)]()),_0x27d4ff['userAgent'];}async[_0x35f194(0x172)](_0x337d8a){const _0x21cae2=_0x35f194;if(!this[_0x21cae2(0x137)](_0x337d8a))return this[_0x21cae2(0x14f)]('error','Invalid\x20accountId\x20for\x20UA\x20rotation:\x20'+_0x337d8a),this['generateNewUserAgent']();const _0x2f012a=this[_0x21cae2(0x10c)](_0x337d8a);return _0x2f012a[_0x21cae2(0x111)]=this[_0x21cae2(0x144)](),await this['_saveSession'](),_0x2f012a[_0x21cae2(0x111)];}[_0x35f194(0x15b)](_0xeab818=''){return/android|iphone|ipad|ipod|windows phone|iemobile|mobile|tablet/i['test'](_0xeab818);}[_0x35f194(0x13f)](_0xadbd5e=''){const _0x349f65=_0x35f194,_0x5068ed=_0xadbd5e[_0x349f65(0x15a)]();if(_0x5068ed[_0x349f65(0x105)](_0x349f65(0x145)))return _0x349f65(0x157);if(_0x5068ed[_0x349f65(0x105)]('android'))return _0x349f65(0x13b);if(_0x5068ed[_0x349f65(0x105)](_0x349f65(0x133))||_0x5068ed[_0x349f65(0x105)](_0x349f65(0x109)))return _0x349f65(0x143);if(_0x5068ed[_0x349f65(0x105)](_0x349f65(0x139))||_0x5068ed[_0x349f65(0x105)]('mac\x20os\x20x'))return _0x349f65(0x125);if(_0x5068ed[_0x349f65(0x105)](_0x349f65(0x14d)))return _0x349f65(0x10b);if(_0x5068ed['includes'](_0x349f65(0x148)))return _0x349f65(0x15c);return'Unknown';}[_0x35f194(0x16f)](_0x24ff15=''){const _0x52ffaf=_0x35f194,_0xfa7f5d=(_0x24ff15||'')['toLowerCase']();let _0x5592f2=_0xfa7f5d['match'](/(?:chrome|crios)\/(\d{2,3})/i)?.[0x1]||_0xfa7f5d[_0x52ffaf(0x158)](/firefox\/(\d{2,3})/i)?.[0x1]||_0x52ffaf(0x129),_0x5afe54;if(/chrome|crios|chromium/[_0x52ffaf(0x138)](_0xfa7f5d))_0x5afe54=_0x52ffaf(0x156)+_0x5592f2+'\x22,\x20\x22Google\x20Chrome\x22;v=\x22'+_0x5592f2+_0x52ffaf(0x12f);else{if(/firefox/['test'](_0xfa7f5d))_0x5afe54=_0x52ffaf(0x149)+_0x5592f2+_0x52ffaf(0x12f);else/safari/[_0x52ffaf(0x138)](_0xfa7f5d)&&!/chrome|crios/[_0x52ffaf(0x138)](_0xfa7f5d)?_0x5afe54=_0x52ffaf(0x117)+_0x5592f2+'\x22,\x20\x22Not.A/Brand\x22;v=\x2299\x22':_0x5afe54=_0x52ffaf(0x130);}const _0x3a73ec={'sec-ch-ua':_0x5afe54,'sec-ch-ua-mobile':this[_0x52ffaf(0x15b)](_0x24ff15)?'?1':'?0','sec-ch-ua-platform':'\x22'+this[_0x52ffaf(0x13f)](_0x24ff15)+'\x22'};return _0x3a73ec;}[_0x35f194(0x108)](_0x5b8337='',_0x43954f='?'){const _0x36d210=_0x35f194;let _0x358635={'width':0x640,'height':0x384,'deviceScaleFactor':0x1,'isMobile':![],'hasTouch':![]};if(!_0x5b8337)return this[_0x36d210(0x14f)](_0x36d210(0x106),_0x43954f+_0x36d210(0x166)),_0x358635;if(this[_0x36d210(0x15b)](_0x5b8337)){const _0x242174=[{'width':0x177,'height':0x29b,'deviceScaleFactor':0x2,'isMobile':!![],'hasTouch':!![]},{'width':0x186,'height':0x34c,'deviceScaleFactor':0x3,'isMobile':!![],'hasTouch':!![]},{'width':0x19c,'height':0x393,'deviceScaleFactor':0x3,'isMobile':!![],'hasTouch':!![]},{'width':0x168,'height':0x2e4,'deviceScaleFactor':0x3,'isMobile':!![],'hasTouch':!![]}];_0x358635=_0x242174[Math[_0x36d210(0x136)](Math[_0x36d210(0x11b)]()*_0x242174[_0x36d210(0x13e)])],this[_0x36d210(0x14f)](_0x36d210(0x13c),_0x36d210(0x13d)+_0x358635[_0x36d210(0x116)]+'x'+_0x358635[_0x36d210(0x15d)]+'@'+_0x358635[_0x36d210(0x164)]);}else this[_0x36d210(0x14f)](_0x36d210(0x13c),'Desktop\x20UA\x20detected\x20→\x20viewport\x20'+_0x358635['width']+'x'+_0x358635[_0x36d210(0x15d)]);return _0x358635;}[_0x35f194(0x14a)](_0x46026e){const _0x48ef57=_0x35f194;return this[_0x48ef57(0x10c)](_0x46026e)[_0x48ef57(0x11a)];}async[_0x35f194(0x173)](_0x23fe1f,_0x39431d=Date[_0x35f194(0x12a)]()){const _0x342a3d=_0x35f194,_0x9eb79e=this['_getAccount'](_0x23fe1f);_0x9eb79e[_0x342a3d(0x11a)]=_0x39431d,await this[_0x342a3d(0x146)]();}[_0x35f194(0x15f)](_0x51d446){const _0x3957fc=_0x35f194;return this[_0x3957fc(0x10c)](_0x51d446)[_0x3957fc(0x162)]===!![];}async[_0x35f194(0x152)](_0x237d8){const _0xd0c0b2=_0x35f194,_0x4a1d35=this[_0xd0c0b2(0x10c)](_0x237d8);_0x4a1d35[_0xd0c0b2(0x162)]=!![],await this[_0xd0c0b2(0x146)]();}async[_0x35f194(0x126)](_0x5dfabb=_0x5b5710['join'](__dirname,_0x35f194(0x151))){const _0x20db99=_0x35f194;try{const _0x2d31fe=await _0x2fdd49[_0x20db99(0x113)](_0x5dfabb,'utf-8'),_0x55a09c=JSON[_0x20db99(0x169)](_0x2d31fe||'{}');let _0x454a5e=0x0;for(const [_0xdf3681,_0x4d7b2a]of Object[_0x20db99(0x115)](_0x55a09c)){const _0x22d617=this[_0x20db99(0x10c)](_0xdf3681);if(typeof _0x4d7b2a===_0x20db99(0x128)&&_0x4d7b2a)!_0x22d617[_0x20db99(0x111)]&&(_0x22d617[_0x20db99(0x111)]=_0x4d7b2a,_0x454a5e++);else{if(_0x4d7b2a&&typeof _0x4d7b2a===_0x20db99(0x160)){_0x4d7b2a[_0x20db99(0x111)]&&!_0x22d617[_0x20db99(0x111)]&&(_0x22d617[_0x20db99(0x111)]=_0x4d7b2a[_0x20db99(0x111)],_0x454a5e++);if(_0x4d7b2a['bridgeCompleted']===!![])_0x22d617['bridgeCompleted']=!![];if(typeof _0x4d7b2a[_0x20db99(0x11a)]===_0x20db99(0x16d))_0x22d617[_0x20db99(0x11a)]=_0x4d7b2a[_0x20db99(0x11a)];}}}if(_0x454a5e>0x0)await this[_0x20db99(0x146)]();return this[_0x20db99(0x14f)](_0x20db99(0x13c),_0x20db99(0x118)+_0x454a5e+_0x20db99(0x16a)+_0x5dfabb),_0x454a5e;}catch(_0x5eac71){if(_0x5eac71['code']===_0x20db99(0x15e))return this[_0x20db99(0x14f)](_0x20db99(0x13c),_0x20db99(0x168)+_0x5dfabb+',\x20skip\x20migration.'),0x0;return this[_0x20db99(0x14f)](_0x20db99(0x11c),_0x20db99(0x147)+_0x5eac71[_0x20db99(0x153)]),0x0;}}async['_loadSafeWalletCache'](){const _0x1cf546=_0x35f194;try{let _0x443976='';try{_0x443976=await _0x2fdd49[_0x1cf546(0x113)](SAFE_WALLET_CACHE_FILE,_0x1cf546(0x121));}catch(_0x550479){if(_0x550479[_0x1cf546(0x10e)]!=='ENOENT')throw _0x550479;}const _0x4da3cf=_0x443976&&_0x443976[_0x1cf546(0x12c)]()?JSON[_0x1cf546(0x169)](_0x443976):{};this[_0x1cf546(0x12d)]=typeof _0x4da3cf==='object'&&_0x4da3cf!==null?_0x4da3cf:{},this[_0x1cf546(0x14f)]('info',_0x1cf546(0x127));}catch(_0x1d5d1d){this[_0x1cf546(0x14f)](_0x1cf546(0x11c),'Failed\x20to\x20read\x20multi-sig\x20cache:\x20'+_0x1d5d1d[_0x1cf546(0x153)]+'.\x20Initializing\x20empty\x20cache.'),this[_0x1cf546(0x12d)]={};}}async[_0x35f194(0x119)](){const _0x9c4857=_0x35f194;try{const _0x8f4614=JSON[_0x9c4857(0x140)](this[_0x9c4857(0x12d)],null,0x2);await _0x2fdd49['writeFile'](SAFE_WALLET_CACHE_FILE,_0x8f4614,_0x9c4857(0x121));}catch(_0x528f25){this['_log']('error',_0x9c4857(0x167)+_0x528f25[_0x9c4857(0x153)]);}}async[_0x35f194(0x131)](_0x31c213){const _0x115f15=_0x35f194;_0x31c213&&!this[_0x115f15(0x12d)][_0x31c213]&&(this['safeWalletCache'][_0x31c213]={},await this[_0x115f15(0x119)]());}async['ensureEoaCache'](_0x45dc1a){const _0xd2953b=_0x35f194;_0x45dc1a&&!this['safeWalletCache'][_0x45dc1a]&&(this['safeWalletCache'][_0x45dc1a]={},await this[_0xd2953b(0x119)]());}[_0x35f194(0x114)](_0x707553,_0xd75e0a,_0x35a030){const _0x461991=_0x35f194;if(!_0x35a030||!this[_0x461991(0x12d)][_0x35a030]||this[_0x461991(0x12d)][_0x35a030][_0x707553]===undefined)return![];const _0x34fa68=this[_0x461991(0x12d)][_0x35a030][_0x707553];if(_0x34fa68===_0x461991(0x112))return![];return BigInt(_0x34fa68)<_0xd75e0a;}async['updateWalletInCache'](_0x58f241,_0x3cb4a3,_0x52de87){const _0xf809ae=_0x35f194;if(!_0x52de87){this[_0xf809ae(0x14f)](_0xf809ae(0x11c),'Cannot\x20update\x20wallet\x20cache\x20without\x20an\x20EOA\x20address.');return;}(!this['safeWalletCache'][_0x52de87]||typeof this[_0xf809ae(0x12d)][_0x52de87]!=='object')&&(this[_0xf809ae(0x12d)][_0x52de87]={}),this[_0xf809ae(0x12d)][_0x52de87][_0x58f241]=_0x3cb4a3[_0xf809ae(0x120)](),await this[_0xf809ae(0x119)]();}async[_0x35f194(0x154)](_0x28d7a1,_0x376436){const _0x131a4b=_0x35f194;(!_0x376436||!this[_0x131a4b(0x12d)][_0x376436])&&await this['ensureEoaCache'](_0x376436);let _0x1bcaf8=![];const _0x104042=this[_0x131a4b(0x12d)][_0x376436];for(const _0x504504 of _0x28d7a1){_0x104042[_0x504504]===undefined&&(_0x104042[_0x504504]=_0x131a4b(0x112),_0x1bcaf8=!![]);}_0x1bcaf8&&await this[_0x131a4b(0x119)]();}}